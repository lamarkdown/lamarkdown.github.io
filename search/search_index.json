{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Introduction Lamarkdown is a command-line markdown document compiler based on Python-Markdown . The goal is to provide a tool comparable to LaTeX, but with the Markdown and HTML formats in place of TeX and PDF. It is not a goal to build static websites, though Lamarkdown\u2019s extensions can be reused in MkDocs (or in other applications based on Python-Markdown). Take the Lamarkdown tour to get a first impression. 1. Requirements and Installation Lamarkdown depends on Python 3.8+. To install via pip: $ pip install lamarkdown There are optional dependencies that you\u2019ll need to install separately, to make use of certain Lamarkdown features. For embedding LaTeX diagramming code, you need a Latex distribution (e.g., TeX Live ), and a PDF-to-SVG conversion tool. (Lamarkdown can embed LaTeX mathematical expressions without a LaTeX distribution, and does not require LaTeX for any part of its core operation.) Similarly, to embed the output of Graphviz , Matplotlib , R (for plotting) , or PlantUML , you will also need to install these yourself. 2. Basic Usage To compile mydocument.md into mydocument.html : $ lamd mydocument.md You can enable the live-update mode using -l / --live : $ lamd -l mydocument.md This will launch a local web-server and a web-browser, and will keep mydocument.html in sync with any changes made to mydocument.md , until you press Ctrl+C in the terminal. For detailed usage, Lamarkdown\u2019s documentation is structured as follows: The Tour gives a glimpse of Lamarkdown\u2019s key features, to give you an overall sense of what\u2019s possible. The Core Functionality section describes the essential workings of Lamarkdown, including build files (at a conceptual level), directives , variants , allow_exec , resource processing and caching . The Extensions section covers add-on Markdown functionality. Extensions (often) make changes to the Markdown syntax, to introduce additional capabilities. The Build Modules section covers pre-designed bundles of reusable configuration. The Build File API section specifies all programmatic Lamarkdown functionality accessible to a build file. 3. Why Lamarkdown? Lamarkdown addresses a need for creating accessible, portable (and optionally scriptable) documents, using a maximally-readable plain-text source format, and a programmable build process. 3.1. Word Processors, LaTeX and PDFs WYSIWYG word processors (Word, LibreOffice, Google Docs and others) are perhaps the most-used document-preparation systems. These are highly successful applications, but the endurance of LaTeX, despite its learning curve, demonstrates a long-standing demand for plain-text document creation as well. LaTeX (and TeX in general) offers transparency. The PDF files generated by pdftex , xetex and luatex depend only on the text you explicitly write. There are no invisible elements or hidden dimensions to a LaTeX document; all factors affecting the output are plainly visible as text. You can edit a LaTeX document with any of hundreds of different editors, and have no concern that some hidden property might change beyond your control (leaving the document unpredictably reformatted or corrupted). LaTeX also encourages greater focus on pure content, while the compiler makes sensible stylistic decisions automatically. Both these things promote consistency and (subject to a learning curve) productivity. TeX/LaTeX is extensible, but also has distinct weaknesses: It was designed to produce static, paginated, printable documents, whereas documents today are rarely printed. It was not designed to produce re-flowable documents that can be presented at different sizes, or documents accessible to vision-impared people. The Portable Document Format (PDF) struggles to address these issues itself, and is difficult to work with programmatically. LaTeX code is relatively verbose, which can limit its productivity benefits. 3.2. Markdown and HTML The Markdown format shares many of LaTeX\u2019s advantages, but was designed for purely electronic communication. It is conventionally compiled into HTML, a universally-supported, re-flowable format that retains structural semantics needed for screen readers. Markdown is one of a number of plain-text formats to do this, but is notable for its minimalistic syntax and widespread use. (HTML itself can be written manually, but being even more verbose than LaTeX, and without any \u201ccompile-time\u201d extensibility, this is difficult to do productively.) Markdown is commonly used to build static websites. Various tools exist to convert a collection of .md (Markdown) files into a collection of .html files, to be uploaded to a webserver. For instance, this site was generated from Markdown files using MkDocs , which uses the Python-Markdown library. However, this is a different use case from the preparation of individual, standalone documents, as done through LaTeX. Markdown, as a format, is an attractive choice for both use cases, but standalone document preparation has certain extra or different requirements: Documents should be viewable without any webserver infrastructure (or external services), since this is not feasible or sustainable for documents in general. Even if infrastructure or services can be set up, they may not have the required longevity. Documents should be self-contained (like PDFs in general), so they can be stored and exchanged without risk of losing resources \u201ccontained\u201d within them. While we\u2019d like the option for documents to be scriptable, they should ideally not depend on scripting, and if possible contain no executable code at all. Scripting is subject to ongoing change. API features may be deprecated and abandoned in the future, for security, efficiency or maintenance reasons, under the assumption that affected websites are being actively maintained, and can simply adapt. Such future changes could render a script-dependent document suddenly unviewable, perhaps without anyone noticing for some time until the document is needed. Document preparation benefits from specific features not necessarily present in static site generators: Citation and reference formatting; Automatic numbering of sections, figures, tables, etc., and cross-referencing using such numbers; Captioning of figures, tables, etc.; Creation of graphical content within the document; Creation of arbitrarily-complex tables; Creation of alternate document versions from the same source.","title":"Home"},{"location":"#introduction","text":"Lamarkdown is a command-line markdown document compiler based on Python-Markdown . The goal is to provide a tool comparable to LaTeX, but with the Markdown and HTML formats in place of TeX and PDF. It is not a goal to build static websites, though Lamarkdown\u2019s extensions can be reused in MkDocs (or in other applications based on Python-Markdown). Take the Lamarkdown tour to get a first impression.","title":"Introduction"},{"location":"#1-requirements-and-installation","text":"Lamarkdown depends on Python 3.8+. To install via pip: $ pip install lamarkdown There are optional dependencies that you\u2019ll need to install separately, to make use of certain Lamarkdown features. For embedding LaTeX diagramming code, you need a Latex distribution (e.g., TeX Live ), and a PDF-to-SVG conversion tool. (Lamarkdown can embed LaTeX mathematical expressions without a LaTeX distribution, and does not require LaTeX for any part of its core operation.) Similarly, to embed the output of Graphviz , Matplotlib , R (for plotting) , or PlantUML , you will also need to install these yourself.","title":"1. Requirements and Installation"},{"location":"#2-basic-usage","text":"To compile mydocument.md into mydocument.html : $ lamd mydocument.md You can enable the live-update mode using -l / --live : $ lamd -l mydocument.md This will launch a local web-server and a web-browser, and will keep mydocument.html in sync with any changes made to mydocument.md , until you press Ctrl+C in the terminal. For detailed usage, Lamarkdown\u2019s documentation is structured as follows: The Tour gives a glimpse of Lamarkdown\u2019s key features, to give you an overall sense of what\u2019s possible. The Core Functionality section describes the essential workings of Lamarkdown, including build files (at a conceptual level), directives , variants , allow_exec , resource processing and caching . The Extensions section covers add-on Markdown functionality. Extensions (often) make changes to the Markdown syntax, to introduce additional capabilities. The Build Modules section covers pre-designed bundles of reusable configuration. The Build File API section specifies all programmatic Lamarkdown functionality accessible to a build file.","title":"2. Basic Usage"},{"location":"#3-why-lamarkdown","text":"Lamarkdown addresses a need for creating accessible, portable (and optionally scriptable) documents, using a maximally-readable plain-text source format, and a programmable build process.","title":"3. Why Lamarkdown?"},{"location":"#31-word-processors-latex-and-pdfs","text":"WYSIWYG word processors (Word, LibreOffice, Google Docs and others) are perhaps the most-used document-preparation systems. These are highly successful applications, but the endurance of LaTeX, despite its learning curve, demonstrates a long-standing demand for plain-text document creation as well. LaTeX (and TeX in general) offers transparency. The PDF files generated by pdftex , xetex and luatex depend only on the text you explicitly write. There are no invisible elements or hidden dimensions to a LaTeX document; all factors affecting the output are plainly visible as text. You can edit a LaTeX document with any of hundreds of different editors, and have no concern that some hidden property might change beyond your control (leaving the document unpredictably reformatted or corrupted). LaTeX also encourages greater focus on pure content, while the compiler makes sensible stylistic decisions automatically. Both these things promote consistency and (subject to a learning curve) productivity. TeX/LaTeX is extensible, but also has distinct weaknesses: It was designed to produce static, paginated, printable documents, whereas documents today are rarely printed. It was not designed to produce re-flowable documents that can be presented at different sizes, or documents accessible to vision-impared people. The Portable Document Format (PDF) struggles to address these issues itself, and is difficult to work with programmatically. LaTeX code is relatively verbose, which can limit its productivity benefits.","title":"3.1. Word Processors, LaTeX and PDFs"},{"location":"#32-markdown-and-html","text":"The Markdown format shares many of LaTeX\u2019s advantages, but was designed for purely electronic communication. It is conventionally compiled into HTML, a universally-supported, re-flowable format that retains structural semantics needed for screen readers. Markdown is one of a number of plain-text formats to do this, but is notable for its minimalistic syntax and widespread use. (HTML itself can be written manually, but being even more verbose than LaTeX, and without any \u201ccompile-time\u201d extensibility, this is difficult to do productively.) Markdown is commonly used to build static websites. Various tools exist to convert a collection of .md (Markdown) files into a collection of .html files, to be uploaded to a webserver. For instance, this site was generated from Markdown files using MkDocs , which uses the Python-Markdown library. However, this is a different use case from the preparation of individual, standalone documents, as done through LaTeX. Markdown, as a format, is an attractive choice for both use cases, but standalone document preparation has certain extra or different requirements: Documents should be viewable without any webserver infrastructure (or external services), since this is not feasible or sustainable for documents in general. Even if infrastructure or services can be set up, they may not have the required longevity. Documents should be self-contained (like PDFs in general), so they can be stored and exchanged without risk of losing resources \u201ccontained\u201d within them. While we\u2019d like the option for documents to be scriptable, they should ideally not depend on scripting, and if possible contain no executable code at all. Scripting is subject to ongoing change. API features may be deprecated and abandoned in the future, for security, efficiency or maintenance reasons, under the assumption that affected websites are being actively maintained, and can simply adapt. Such future changes could render a script-dependent document suddenly unviewable, perhaps without anyone noticing for some time until the document is needed. Document preparation benefits from specific features not necessarily present in static site generators: Citation and reference formatting; Automatic numbering of sections, figures, tables, etc., and cross-referencing using such numbers; Captioning of figures, tables, etc.; Creation of graphical content within the document; Creation of arbitrarily-complex tables; Creation of alternate document versions from the same source.","title":"3.2. Markdown and HTML"},{"location":"api/","text":"Build File API Reference TBD","title":"API"},{"location":"api/#build-file-api-reference","text":"TBD","title":"Build File API Reference"},{"location":"api_tmp/","text":"Build File API Reference The lamarkdown package provides the following functionality, to be accessed from build files and build modules : 1. Extension Loading and Configuration 1.1. lamarkdown.__call__(*extensions, **config) Applies one or more markdown extensions. You may either: Provide one or more extension names and/or markdown.extensions.Extension objects without config options: import lamarkdown as la la ( 'attr_list' , 'nl2br' , 'toc' , 'la.cite' , 'pymdownx.extra' ) Provide one extension name with associated config options. import lamarkdown as la la ( 'la.latex' , tex = 'pdflatex' , pdf_svg_converter = 'inkscape' ) You can specify a given extension multiple times (by name). It will only be loaded once, but its config options will accumulate. To provide config options to multiple extensions, you must call them all individually. To provide config options to a markdown.extensions.Extension object (which you may have if you create your own extensions), you must pass them directly to the extension\u2019s constructor. __call__() also returns a live dict containing the configuration options, so that existing options can be queried and/or amended separately. 1.2. lamarkdown.extendable(value, join = '') Wraps a configuration value, causing it to be extended, rather than overwritten, if/when another value is given later (for the same option). Normally, re-specifying a given config option will cause it to be overwritten: import lamarkdown as la la ( 'the.extension' , opt1 = 'hello' , opt2 = [ 1 , 2 , 3 ]) la ( 'the.extension' , opt1 = 'world' , opt2 = [ 4 , 5 , 6 ]) # 'opt1' will be 'world', opt2 will be [4, 5, 6] If you wrap a value using extendable() , then: If it\u2019s a string, successive values will concatenate, separated by the value of join ; If it\u2019s a list , set or dict , any existing value will be extended/updated by a new value (using the container\u2019s extend() or update() method as appropriate). Thus: import lamarkdown as la la ( 'the.extension' , opt1 = la . extendable ( 'hello' , join = ' ' ), opt2 = la . extendable ([ 1 , 2 , 3 ])) la ( 'the.extension' , opt1 = 'world' , opt2 = [ 4 , 5 , 6 ]) # 'opt1' will be 'hello world', opt2 will be [1, 2, 3, 4, 5, 6] Moreover, providing an extendable value will preserve any existing non-wrapped value: import lamarkdown as la la ( 'the.extension' , opt1 = 'hello' , opt2 = [ 1 , 2 , 3 ]) la ( 'the.extension' , opt1 = la . extendable ( 'world' , join = ' ' ), opt2 = la . extendable ([ 4 , 5 , 6 ])) # 'opt1' will be 'hello world', opt2 will be [1, 2, 3, 4, 5, 6] It is safe (if unnecessary) to provide extendable multiple times for a single config option. To override the effects of extendable , you can directly manipulate the dict returned by __call__() : import lamarkdown as la la ( 'the.extension' , opt1 = la . extendable ( 'hello' ), opt2 = la . extendable ([ 1 , 2 , 3 ])) opts = la ( 'the.extension' ) opts [ 'opt1' ] = 'hello' # non-extendable del opts [ 'opt2' ] la ( 'the.extension' , opt1 = 'world' , opt2 = [ 4 , 5 , 6 ]) # 'opt1' will be 'world', opt2 will be [4, 5, 6] 1.3. lamarkdown.late(value_callback) Lets you provide a callback returning a value, rather than a direct value, for an extension config option. The callback will be invoked at the last opportunity, after all build files have been processed, and right before Lamarkdown invokes Python Markdown. import lamarkdown as la la ( 'the.extension' , opt = la . late ( lambda : 'hello' )) This may be useful when writing a build module, to make a particular config option refer to other parts of the configuration. late values are compatible with extendable values: import lamarkdown as la la ( 'the.extension' , opt = la . extendable ( la . late ( lambda : 'hello' ), join = ' ' )) la ( 'the.extension' , opt = 'world' )) # opt will be 'hello world' Some extensions accept functions as config values. So, for extension config purposes, Lamarkdown will only call functions wrapped using late() . 2. Styling and Scripting (Resources) 2.1. lamarkdown.css(value, if_xpaths = [], if_selectors = []) Adds a snippet of CSS code (assumed to be one or more CSS rules) to the output document, within <style> tags. If if_xpaths or if_selectors are non-empty, then these are first matched against the output HTML to determine whether or not to include the CSS. if_xpaths must be a list of XPath expressions, and if_selectors must be a list of CSS selectors. The CSS code will be included if any of the XPath expressions or CSS selectors match (or if none are specified), and omitted otherwise. This feature is intended for the development of reusable build modules. For instance, calling css('li { color: blue; }', if_selectors=['li']) will include \u201c li { color: blue; } \u201d in the output document style, but only if the li selector matches something (i.e., if there are any <li> elements). It\u2019s important to distinguish what\u2019s happening here from what the web browser itself will do. The browser will execute all the CSS rules it receives as part of the HTML document. However, the processing described here happens at \u201ccompile-time\u201d, and determines which CSS rules will exist in the HTML document to begin with. value is generally a string representing the CSS code. However, it can alternatively be a function returning a string, taking as a parameter the subset of XPath expressions that matched the document. If so, it will be called unconditionally and its return value used if not None . 2.2. lamarkdown.css_rule(selectors, properties) A convenience function that takes a list of CSS selectors , and a string containing one or more CSS property declarations, and builds a single CSS rule, which will adapt to the output document. The set of selectors actually present in the output will be the subset of selectors that match the document. If none of them match, the rule will be omitted altogether. 2.3. lamarkdown.css_files(*values, if_xpaths = [], if_selectors = []) Adds one or more external .css style files at specified URLs. Only the URLs will be inserted into the output document (using <link href=\"...\"> tags). The if_xpaths and if_selectors parameters have the same meaning as for the css() function. Each of the values is either a string, or a function returning a string. 2.4. lamarkdown.js(value, if_xpaths = [], if_selectors = []) Adds a snippet of JavaScript code to the end of the output document, within <script> tags. The if_xpaths and if_selectors parameters have the same meaning as for the css() function. value can be either string, or a function returning a string. 2.5. lamarkdown.js_files(*values, if_xpaths = [], if_selectors = []) Adds one or more external .js script files at specified URLs. Only the URLs will be inserted into the output document (using <script src=\"...\"> tags). The if_xpaths and if_selectors parameters have the same meaning as for the css() function. Each of the values is either a string, or a function returning a string. 2.6. lamarkdown.embed(embed_rule) Specifies which external resources to embed in the output document (of those not already embedded by some other mechanism). If embed_rule is simply True or False , then Lamarkdown will embed everything, or nothing, respectively. For more fine-grained control, embed_rule can be a rule callback returning True or False . For example, to embed only JPEG images: import lamarkdown as la la . embed ( lambda url = '' , type = '' , ** kwargs : url . endswith ( '.jpg' ) or type == 'image/jpeg' ) 2.7. lamarkdown.scale(scale_rule) Specifies a scaling factor to use across all <img> and <svg> elements in the document. If scale_rule is simply a number, then Lamarkdown will uniformly scale all images by that amount. For more fine-grained control, scale_rule can be a rule callback returning a scaling factor. 2.8. lamarkdown.resource_hash_type(hash_rule) Specifies either a hashing algorithm (or None ) to use for remotely-linked files, to verify that such files haven\u2019t been manipulated when opening the document. If hash_rule is 'sha256' , 'sha384' or 'sha512' , then that algorithm is used across all remotely-linked files. If hash_rule is None, then such hashing is globally disabled. For more fine-grained control, hash_rule can be a rule callback that returns 'sha256' , 'sha384' , 'sha512' or None . There\u2019s no way to automatically check the integrity of remote files during compilation, when the hashes are first computed. 3. Variants variants(*variant_fns) : Defines a set of variants . The parameters must be functions (or callable objects), each of which, when called, should make further API calls. Each of these functions thus defines a \u201cvariant\u201d, and Lamarkdown will compile a separate output file for each variant according to its particular configuration. Variants will all share the common settings defined globally. Nested variants are permitted too; one can call variants() from within a variant function, and those sub-variants will share the settings of their \u201cparent\u201d. Generally you will want to specify at least two variants whenever calling variants() . Specifying only one is permitted, but is essentially no different to not using the facility at all. target(fn) : Specifies a function for determining the output name. Without any variants, the default output file is simply the input file with .md replaced by .html . With variants, the default is to add the variant name to each output file, with a separator, just before the extension. Thus, compiling mydoc.md with variantA and variantB will (by default) result in mydoc_variantA.html and mydoc_variantB.html . Calling target() can change this behaviour arbitrarily. The function fn must accept the originally conceived output filename (generally ending in .html ) and return the name to be used by this variant. Keep in mind that the same build logic might be used across several different input documents; hence why target() accepts a function and not just a string. base_name() : Equivalent to calling target(lambda t: t) . That is, this causes a particular variant to have the original default output name. Obviously only one variant should call base_name() ; it should not be used at the global level. Also see the functions below for ways to create structural differences between variant documents. 4. Document Modification and Querying prune(selector = None, xpath = None) : Delete parts of the document tree that match either a CSS selector or an XPath expression. This is especially intended to help create structurally different variants of the document. For instance, one variant could call prune('.answers') to delete all HTML elements with class=\"answers\" , while another one could retain it. This would allow you to build both a question paper and answer guide from the same input, provided you attach class=\"answers\" to the right parts of the document (e.g., via the attr_list or admonition extensions.). with_selector(selector, fn) : Runs function fn on each element of the document tree matching the given CSS selector. The function may query or arbitrarily modify the tree. (Lamarkdown uses the lxml API for this, which is an extension of the standard xml.etree.ElementTree interface.) with_xpath(xpath, fn) : Like with_selector() , but accepts XPath expressions in place of CSS selectors. with_tree(fn) : Runs function fn on the root of the document tree. wrap_content(start, end) : Adds arbitrary HTML code on either end of the output generated by Python Markdown. This may be necessary to support certain JavaScript frameworks like RevealJS. Multiple calls will accumulate additional HTML code around the outside of what has already been specified. wrap_content_inner(start, end) : The same as wrap_content() , except that multiple calls will place new HTML inside previously-specified wrapping code, immediately around the Python Markdown output. 5. Other Queries get_build_dir() : Returns the directory that Lamarkdown uses for temporary build-related files. get_env() : Returns the dictionary that (for the moment) is used by the lamarkdown.ext.eval extension to permit the embedding and execution of Python expressions directly within .md files. get_params() : Returns the BuildParams object encapsulating the complete set of arguments to the build process (apart from the actual markdown code).","title":"Build File API Reference"},{"location":"api_tmp/#build-file-api-reference","text":"The lamarkdown package provides the following functionality, to be accessed from build files and build modules :","title":"Build File API Reference"},{"location":"api_tmp/#1-extension-loading-and-configuration","text":"","title":"1. Extension Loading and Configuration"},{"location":"api_tmp/#lamarkdown_call","text":"Applies one or more markdown extensions. You may either: Provide one or more extension names and/or markdown.extensions.Extension objects without config options: import lamarkdown as la la ( 'attr_list' , 'nl2br' , 'toc' , 'la.cite' , 'pymdownx.extra' ) Provide one extension name with associated config options. import lamarkdown as la la ( 'la.latex' , tex = 'pdflatex' , pdf_svg_converter = 'inkscape' ) You can specify a given extension multiple times (by name). It will only be loaded once, but its config options will accumulate. To provide config options to multiple extensions, you must call them all individually. To provide config options to a markdown.extensions.Extension object (which you may have if you create your own extensions), you must pass them directly to the extension\u2019s constructor. __call__() also returns a live dict containing the configuration options, so that existing options can be queried and/or amended separately.","title":"1.1. lamarkdown.__call__(*extensions, **config)"},{"location":"api_tmp/#12-lamarkdownextendablevalue-join","text":"Wraps a configuration value, causing it to be extended, rather than overwritten, if/when another value is given later (for the same option). Normally, re-specifying a given config option will cause it to be overwritten: import lamarkdown as la la ( 'the.extension' , opt1 = 'hello' , opt2 = [ 1 , 2 , 3 ]) la ( 'the.extension' , opt1 = 'world' , opt2 = [ 4 , 5 , 6 ]) # 'opt1' will be 'world', opt2 will be [4, 5, 6] If you wrap a value using extendable() , then: If it\u2019s a string, successive values will concatenate, separated by the value of join ; If it\u2019s a list , set or dict , any existing value will be extended/updated by a new value (using the container\u2019s extend() or update() method as appropriate). Thus: import lamarkdown as la la ( 'the.extension' , opt1 = la . extendable ( 'hello' , join = ' ' ), opt2 = la . extendable ([ 1 , 2 , 3 ])) la ( 'the.extension' , opt1 = 'world' , opt2 = [ 4 , 5 , 6 ]) # 'opt1' will be 'hello world', opt2 will be [1, 2, 3, 4, 5, 6] Moreover, providing an extendable value will preserve any existing non-wrapped value: import lamarkdown as la la ( 'the.extension' , opt1 = 'hello' , opt2 = [ 1 , 2 , 3 ]) la ( 'the.extension' , opt1 = la . extendable ( 'world' , join = ' ' ), opt2 = la . extendable ([ 4 , 5 , 6 ])) # 'opt1' will be 'hello world', opt2 will be [1, 2, 3, 4, 5, 6] It is safe (if unnecessary) to provide extendable multiple times for a single config option. To override the effects of extendable , you can directly manipulate the dict returned by __call__() : import lamarkdown as la la ( 'the.extension' , opt1 = la . extendable ( 'hello' ), opt2 = la . extendable ([ 1 , 2 , 3 ])) opts = la ( 'the.extension' ) opts [ 'opt1' ] = 'hello' # non-extendable del opts [ 'opt2' ] la ( 'the.extension' , opt1 = 'world' , opt2 = [ 4 , 5 , 6 ]) # 'opt1' will be 'world', opt2 will be [4, 5, 6]","title":"1.2. lamarkdown.extendable(value, join = '')"},{"location":"api_tmp/#13-lamarkdownlatevalue_callback","text":"Lets you provide a callback returning a value, rather than a direct value, for an extension config option. The callback will be invoked at the last opportunity, after all build files have been processed, and right before Lamarkdown invokes Python Markdown. import lamarkdown as la la ( 'the.extension' , opt = la . late ( lambda : 'hello' )) This may be useful when writing a build module, to make a particular config option refer to other parts of the configuration. late values are compatible with extendable values: import lamarkdown as la la ( 'the.extension' , opt = la . extendable ( la . late ( lambda : 'hello' ), join = ' ' )) la ( 'the.extension' , opt = 'world' )) # opt will be 'hello world' Some extensions accept functions as config values. So, for extension config purposes, Lamarkdown will only call functions wrapped using late() .","title":"1.3. lamarkdown.late(value_callback)"},{"location":"api_tmp/#2-styling-and-scripting-resources","text":"","title":"2. Styling and Scripting (Resources)"},{"location":"api_tmp/#21-lamarkdowncssvalue-if_xpaths-if_selectors","text":"Adds a snippet of CSS code (assumed to be one or more CSS rules) to the output document, within <style> tags. If if_xpaths or if_selectors are non-empty, then these are first matched against the output HTML to determine whether or not to include the CSS. if_xpaths must be a list of XPath expressions, and if_selectors must be a list of CSS selectors. The CSS code will be included if any of the XPath expressions or CSS selectors match (or if none are specified), and omitted otherwise. This feature is intended for the development of reusable build modules. For instance, calling css('li { color: blue; }', if_selectors=['li']) will include \u201c li { color: blue; } \u201d in the output document style, but only if the li selector matches something (i.e., if there are any <li> elements). It\u2019s important to distinguish what\u2019s happening here from what the web browser itself will do. The browser will execute all the CSS rules it receives as part of the HTML document. However, the processing described here happens at \u201ccompile-time\u201d, and determines which CSS rules will exist in the HTML document to begin with. value is generally a string representing the CSS code. However, it can alternatively be a function returning a string, taking as a parameter the subset of XPath expressions that matched the document. If so, it will be called unconditionally and its return value used if not None .","title":"2.1. lamarkdown.css(value, if_xpaths = [], if_selectors = [])"},{"location":"api_tmp/#22-lamarkdowncss_ruleselectors-properties","text":"A convenience function that takes a list of CSS selectors , and a string containing one or more CSS property declarations, and builds a single CSS rule, which will adapt to the output document. The set of selectors actually present in the output will be the subset of selectors that match the document. If none of them match, the rule will be omitted altogether.","title":"2.2. lamarkdown.css_rule(selectors, properties)"},{"location":"api_tmp/#23-lamarkdowncss_filesvalues-if_xpaths-if_selectors","text":"Adds one or more external .css style files at specified URLs. Only the URLs will be inserted into the output document (using <link href=\"...\"> tags). The if_xpaths and if_selectors parameters have the same meaning as for the css() function. Each of the values is either a string, or a function returning a string.","title":"2.3. lamarkdown.css_files(*values, if_xpaths = [], if_selectors = [])"},{"location":"api_tmp/#24-lamarkdownjsvalue-if_xpaths-if_selectors","text":"Adds a snippet of JavaScript code to the end of the output document, within <script> tags. The if_xpaths and if_selectors parameters have the same meaning as for the css() function. value can be either string, or a function returning a string.","title":"2.4. lamarkdown.js(value, if_xpaths = [], if_selectors = [])"},{"location":"api_tmp/#25-lamarkdownjs_filesvalues-if_xpaths-if_selectors","text":"Adds one or more external .js script files at specified URLs. Only the URLs will be inserted into the output document (using <script src=\"...\"> tags). The if_xpaths and if_selectors parameters have the same meaning as for the css() function. Each of the values is either a string, or a function returning a string.","title":"2.5. lamarkdown.js_files(*values, if_xpaths = [], if_selectors = [])"},{"location":"api_tmp/#26-lamarkdownembedembed_rule","text":"Specifies which external resources to embed in the output document (of those not already embedded by some other mechanism). If embed_rule is simply True or False , then Lamarkdown will embed everything, or nothing, respectively. For more fine-grained control, embed_rule can be a rule callback returning True or False . For example, to embed only JPEG images: import lamarkdown as la la . embed ( lambda url = '' , type = '' , ** kwargs : url . endswith ( '.jpg' ) or type == 'image/jpeg' )","title":"2.6. lamarkdown.embed(embed_rule)"},{"location":"api_tmp/#27-lamarkdownscalescale_rule","text":"Specifies a scaling factor to use across all <img> and <svg> elements in the document. If scale_rule is simply a number, then Lamarkdown will uniformly scale all images by that amount. For more fine-grained control, scale_rule can be a rule callback returning a scaling factor.","title":"2.7. lamarkdown.scale(scale_rule)"},{"location":"api_tmp/#28-lamarkdownresource_hash_typehash_rule","text":"Specifies either a hashing algorithm (or None ) to use for remotely-linked files, to verify that such files haven\u2019t been manipulated when opening the document. If hash_rule is 'sha256' , 'sha384' or 'sha512' , then that algorithm is used across all remotely-linked files. If hash_rule is None, then such hashing is globally disabled. For more fine-grained control, hash_rule can be a rule callback that returns 'sha256' , 'sha384' , 'sha512' or None . There\u2019s no way to automatically check the integrity of remote files during compilation, when the hashes are first computed.","title":"2.8. lamarkdown.resource_hash_type(hash_rule)"},{"location":"api_tmp/#3-variants","text":"variants(*variant_fns) : Defines a set of variants . The parameters must be functions (or callable objects), each of which, when called, should make further API calls. Each of these functions thus defines a \u201cvariant\u201d, and Lamarkdown will compile a separate output file for each variant according to its particular configuration. Variants will all share the common settings defined globally. Nested variants are permitted too; one can call variants() from within a variant function, and those sub-variants will share the settings of their \u201cparent\u201d. Generally you will want to specify at least two variants whenever calling variants() . Specifying only one is permitted, but is essentially no different to not using the facility at all. target(fn) : Specifies a function for determining the output name. Without any variants, the default output file is simply the input file with .md replaced by .html . With variants, the default is to add the variant name to each output file, with a separator, just before the extension. Thus, compiling mydoc.md with variantA and variantB will (by default) result in mydoc_variantA.html and mydoc_variantB.html . Calling target() can change this behaviour arbitrarily. The function fn must accept the originally conceived output filename (generally ending in .html ) and return the name to be used by this variant. Keep in mind that the same build logic might be used across several different input documents; hence why target() accepts a function and not just a string. base_name() : Equivalent to calling target(lambda t: t) . That is, this causes a particular variant to have the original default output name. Obviously only one variant should call base_name() ; it should not be used at the global level. Also see the functions below for ways to create structural differences between variant documents.","title":"3. Variants"},{"location":"api_tmp/#4-document-modification-and-querying","text":"prune(selector = None, xpath = None) : Delete parts of the document tree that match either a CSS selector or an XPath expression. This is especially intended to help create structurally different variants of the document. For instance, one variant could call prune('.answers') to delete all HTML elements with class=\"answers\" , while another one could retain it. This would allow you to build both a question paper and answer guide from the same input, provided you attach class=\"answers\" to the right parts of the document (e.g., via the attr_list or admonition extensions.). with_selector(selector, fn) : Runs function fn on each element of the document tree matching the given CSS selector. The function may query or arbitrarily modify the tree. (Lamarkdown uses the lxml API for this, which is an extension of the standard xml.etree.ElementTree interface.) with_xpath(xpath, fn) : Like with_selector() , but accepts XPath expressions in place of CSS selectors. with_tree(fn) : Runs function fn on the root of the document tree. wrap_content(start, end) : Adds arbitrary HTML code on either end of the output generated by Python Markdown. This may be necessary to support certain JavaScript frameworks like RevealJS. Multiple calls will accumulate additional HTML code around the outside of what has already been specified. wrap_content_inner(start, end) : The same as wrap_content() , except that multiple calls will place new HTML inside previously-specified wrapping code, immediately around the Python Markdown output.","title":"4. Document Modification and Querying"},{"location":"api_tmp/#5-other-queries","text":"get_build_dir() : Returns the directory that Lamarkdown uses for temporary build-related files. get_env() : Returns the dictionary that (for the moment) is used by the lamarkdown.ext.eval extension to permit the embedding and execution of Python expressions directly within .md files. get_params() : Returns the BuildParams object encapsulating the complete set of arguments to the build process (apart from the actual markdown code).","title":"5. Other Queries"},{"location":"core/","text":"Core Functionality Here we describe Lamarkdown\u2019s core functionality in detail, and how to use it. 1. Build Files When compiling a given Markdown file, Lamarkdown first looks for build files . By default, these are: md_build.py , and/or A .py file with the same base name as the Markdown file (e.g., for example.md , it would be example.py ). If both of these exist, both will be loaded, md_build.py first. Build files contain executable Python code that makes calls to the Build File API , to apply Markdown extensions, provide document style information, and otherwise programmatically hook into the compilation process. If build file(s) exist, but are empty, Lamarkdown will revert to the most basic syntax and functionality supported by Python-Markdown, and produce unstyled output. However, if you run Lamarkdown without a build file, it behave as if the following build file was given: import lamarkdown as la la . m . doc () The m.doc() build module adds a certain set of Markdown extensions, as well as styling the output to better resemble a conventional document. When writing a build file, you can include or omit m.doc() , as per your preference. To add a Markdown extension, you call the lamarkdown module itself. Many extensions have their own settings, which you can configure by passing keyword arguments. If you don\u2019t need to supply any extension options, you can list multiple extensions in one call: import lamarkdown as la la ( 'attr_list' , 'admonition' ) la ( 'toc' , marker = '[[TOC]]' , title = 'Contents' ) To add styling information, call css() or css_files() : import lamarkdown as la la . css ( ''' .note { border: 1px solid #0080c0; background: #80c0ff; padding: 0.5em; } ''' ) la . css_files ( 'style1.css' , 'style2.css' ) By default, CSS files provided to css_files() will actually be embedded in the output, rather than linked, because the goal of Lamarkdown is broadly to create standalone output files. The following command-line options affect how build-files are loaded: Option Description -b / --build FILE Load an (additional) build file. -B / --no-auto-build-files Don\u2019t try to load the default build files ( md_build.py or <source>.py ), even if they exist. -D / --no-build-defaults Even if no build files are loaded, don\u2019t apply the defaults. 2. Directives Lamarkdown adopts a convention, whereby authors may add specially-named attributes to parts of the document, which cause Lamarkdown (or a Lamarkdown extension) to perform certain kinds of structural transformations. These attributes are called directives . Their names begin with - (e.g., -label ), to distinguish them from genuine HTML attributes. Directives are (if validly specified) deleted before the final output is generated. This approach relies on the attr_list or la.attr_prefix extensions (designed to let authors add HTML attributes to elements). Thus, all directive processing must happen after these extensions have run. Specific directives include the following: Directive Description -caption With the la.captions extension, this identifies the caption for a figure or table, and causes both to be wrapped (if appropriate) within a <figure> element. -list-table With the la.list_tables extension, and when applied to a list (containing nested lists), this converts it into a table -label=... With the la.labels extension, and when applied to a heading, list, figure or table, this specifies a template for the numbering of that element. -no-label With the la.labels extension, when applied to an element, causes any labelling to be omitted. -scale=... When applied to an image, this scales both dimensions of the image by a linear factor. -abs-scale When applied to an image, this disregards any global scaling rule. Directives have a long(er) form, starting with md- (e.g., md-caption ). The short - form is converted to the long md- form during Markdown processing, so that they won\u2019t be rejected by subsequent HTML parsing. It is not generally necessary to use the long form inside Markdown documents, but it is possible. Design Notes The - at the start of directives is intended to minimise confusion relative to other possible syntactic choices, while requiring no extra Markdown parsing code beyond the existing attr_list extension (though sometimes directives need to appear in places that require the la.attr_prefix extension). It\u2019s useful to have some means of distinguishing directives from ordinary HTML attributes, because: The two groups have quite different semantics; and We\u2019d like to avoid possible future conflicts between the two. To address other possible choices: Simply always using md- creates extra clutter. Using a different special character (e.g., !directive=... ) runs into the problem that attr_list converts almost all special characters to _ , so we wouldn\u2019t be able to narrowly define which character we\u2019re actually using. A leading or trailing _ itself (e.g., _directive=... or directive_=... ), even if we could accept the ambiguity, may also imply \u201cprivate/internal/auxiliary use\u201d, especially in connection with Python. A leading : (which isn\u2019t converted to _ ) conflicts somewhat with the enclosing list syntax; e.g., in {:directive=...} , the the : will be parsed as the start of the list, not part of the name. We could insist that authors put a space after the { , but this still leaves room for confusion. A trailing - or : would result in directive-=... or directive:=... , where -= and := both have the misleading appearance of a special operator. A XML namespace (e.g., md:directive=... ) creates extra clutter, and would also raise questions about how to formally define that namespace, and how it formally relates to HTML. HTML attributes are case-insensitive, so a convention based on casing (e.g., Directive=... ) risks unforeseen conflicts in the event of case folding. Anything more elaborate is unlikely to be recognised by attr_list , and would require separate parsing. 3. Variants Lamarkdown can generate multiple output files, each with different build configuration, given a single input file. To arrange this, call variants() and pass in one or more functions that will configure each variant: import lamarkdown as la def light_mode (): # Apply to variant #1 la . css ( 'body { color: black; background: white; }' ) def dark_mode () # Apply to variant #2 la . css ( 'body { color: white; background: black; }' ) la . variants ( light_mode , dark_mode ) # Apply to all variants la . css ( 'body { font-family: sans-serif; }' ) You can create nested variants by calling variants() within a variant function, though be careful to avoid infinite recursion. Two variants may specify any arbitrarily-different options, including different Markdown extensions, and/or extension options. In such a case, Lamarkdown will invoke Python-Markdown separately for each distinct extension configuration (possibly resulting in multiple different interpretations of the same Markdown syntax, depending on the options chosen). By default, the output filenames will have the function name appended. In the above example, if the Markdown file is example.md , then Lamarkdown will generate example_light_mode.html and example_dark_mode.html . If you prefer one variant to take on the \u201coriginal\u201d (unmodified) filename, call la.basename() (no arguments) in the appropriate variant function. 4. The allow_exec Option If you\u2019re just compiling your own (or trusted) documents, it\u2019s perfectly fine and useful to set allow_exec == True . There are two ways: Add the -e / --allow-exec command-line option; and/or Assign to the allow_exec property: import lamarkdown as la la . allow_exec = True ... It\u2019s currently not recommended to run Lamarkdown on untrusted documents at all , unless your entire execution environment is sandboxed. Nevertheless, the allow_exec flag attempts to provide some measure of safety in such situations. By default, allow_exec == False , in which case certain actions will not be permitted: Use of the la.eval extension will be restricted to text substitutions (not code execution); Use of the la.markdown_demo extension will be prohibited; Use of Matplotlib and R-plotting, by means of m.plots() , will be prohibited. In general, these restrictions rely on the cooperation of relevant Markdown extensions and build modules. Thus, if you rely on allow_exec being False , you are also relying on each individual extension/module to prohibit executable code. Non-Lamarkdown extensions won\u2019t generally even be aware of the allow_exec flag, so you must exercise care. 5. Resource Processing Lamarkdown performs certain transformations on parts of the HTML document after Python-Markdown has finished. Design Notes One might ask why embedding, hashing and scaling are part of Lamarkdown\u2019s core behaviour, rather than implemented as extensions. There are problems with designing extensions to perform these actions: They rely on identifying and modifying specific HTML elements, which requires a document tree. Python-Markdown makes such trees available during the \u201ctree processing\u201d stage, but some kinds of resources don\u2019t appear until the later \u201cpostprocessing\u201d stage (having been represented only with special placeholder text, and otherwise kept isolated up until then). They involve styles and scripts, which are essentially outside the scope of Python-Markdown\u2019s operation altogether. 5.1. Embedding By default, Lamarkdown will embed external resources in the output HTML file (with some default exclusions). The goal is to create a standalone output file, though it may be comparatively large for an HTML file. In most cases, the resources being embedded will be CSS styles, fonts, scripts, and images. Embedding is performed automatically, by either: Moving the contents of directly-referenced .css and .js files into <style> and <script> elements, as appropriate, within the HTML document; or In other cases, converting a resource into a data URL . Font files will be subsetted (unused characters removed) before being embedded. Styles will be recursively embedded, since CSS files can reference other resources, including other CSS files. Lamarkdown will not currently attempt to resolve resources referenced by scripts, though. Ordinary hypertext links are not embedded (and not considered embeddable). By default, Lamarkdown will also exclude audio and video files, and the contents of any <iframe> elements, since these could make the output unmanageably large. However, the option is open to embed these anyway if you wish. You can provide an \u201cembed rule \u201d to override the default behaviour, if needed: import lamarkdown as la def embed_rule ( url : str | None , tag : str | None , mime : str | None , attr : dict [ str , str ] | None , ** kwargs ) -> bool : return ... la . embed ( embed_rule ) This function will be called whenever Lamarkdown encounters an embeddable resource, and must return True to embed the resource, or False to keep it separate. See Resource Rules below for more details. Efficiency Notes Data URLs use Base-64 encoding, which increases the size of the data by one third, rounding up, since it uses 8 bits to represent only 6 bits. This effect compounds with nested embedding. While a single CSS file is embedded directly in a <style> element, any further CSS files it imports itself will be represented as data URLs, and these in turn may have other data URLs nested inside. Lamarkdown does not (currently) try to \u201cflatten out\u201d CSS imports, because it cannot guarantee that this would be functionally equivalent to the original arrangement, because of certain ordering semantics defined in CSS. Thus, if you have several levels of indirection in your CSS imports, the resulting embedded content will be stored in a highly inefficient manner. It may be worth avoiding such arrangements. 5.2. Hashing Lamarkdown can arrange for the output document to contain a hash (SHA-256, SHA-384 or SHA-512) for each of its external resources, so the browser can verify their integrity . This applies specifically to non - embedded resources. Lamarkdown does not perform hashing by default. To make it do so, define a \u201cresource hash rule \u201d: import lamarkdown as la def hash_rule ( url : str | None , tag : str | None , mime : str | None , attr : dict [ str , str ] | None , ** kwargs ) -> str | None : return ... la . resource_hash_rule ( hash_rule ) This function will be called whenever Lamarkdown needs to know whether and how to compute a resource hash. It must return either None (for no hashing) or one of the strings 'sha256' , 'sha384' or 'sha512' , representing corresponding hashing algorithms. See Resource Rules below for more details. Where a hash is required, Lamarkdown will assume that the currently-available version of the resource is the one you want, and will compute a hash based on it. The hash will appear as the value of the integrity HTML attribute in the output document. Lamarkdown will not compare the hash to anything; this will be left up to the browser, when the document is loaded by readers in the future. Hashing is a compromise between the control afforded by embedding, and the smaller file sizes offered by not embedding. Embedding may (depending on the particular files) significantly increase the file size of the output document. But with non-embedded, non-hashed resources, you must trust the external source(s), because you are ceding control over aspects of the document. For instance, if your document links to http://example.com/image.jpg , then your document will show whatever that image is at the time. If/when the image is replaced on the server, your document will show the new version, and for a reader, there won\u2019t be any sign that it\u2019s not the original. The same and worse could happen for stylesheets and scripts. An external entity with control over a stylesheet or script in your document could choose to disable or arbitrarily modify your entire document remotely, for anyone reading it. With embedded or hashed resources, these are no longer possibilities. However, resource hashing lacks other advantages of embedded resources: Readers require an internet connection to view hashed resources, and must wait a moment for them to load, while embedded resources will be available offline and practically instantaneously. An external entity (controlling a hashed resource) might be able to track readers of the document, by recording requests for the document\u2019s external resource(s) and mapping them to readers\u2019 IP addresses. Hashing won\u2019t protect the document against its resources being moved or deleted. There\u2019s also a chance that you may want the external source to be able to change the resource arbitrarily. In this case, a non-embedded, non-hashed resource would be appropriate. 5.3. Scaling Lamarkdown can adjust the size of images in a document by a linear scaling factor. This applies to any mechanism for generating or inserting images; e.g.: The standard Markdown notation: ![Alt text](http://example.com/image.jpg) . Latex code compiled into SVG using the la.latex extension. SVGs produced by Graphviz, matplotlib, etc., via the m.plots build module. Anything else that creates <svg> or <img> elements. For any given image, there are (potentially) two different scaling factors: You can give a per-image scaling factor using the -scale=... directive ; e.g.: ![ Alt text ]( http://example.com/image.jpg ){-scale=\"2.5\"} You can define a \u201cscale rule \u201d: import lamarkdown as la def scale_rule ( url : str | None , tag : str | None , mime : str | None , attr : dict [ str , str ] | None , ** kwargs ) -> float | int : return ... la . scale_rule ( scale_rule ) This function is called for each image in the document (or at least the body of the document). It must return a float or int representing a scaling factor. See Resource Rules below for more details. These two numbers (both 1 by default) are multiplied to get the actual scaling factor for a given image. So, if an image has {-scale=\"2\"} , and the scale rule returns 3, then the image will be scaled by a factor of 6. That is, unless the -abs-scale directive is given. This will cause the scale rule to be ignored, so that: For {-scale=\"2\" -abs-scale} , the image will be scaled by a factor of 2, irrespective of the scale rule; and For {-abs-scale} , the image won\u2019t be scaled at all. Scaling only alters the size information present in the HTML document. It doesn\u2019t affect the actual image content, and so it applies equally to embedded and linked images, and to (practically) any image format supported by web browsers. However, Lamarkdown only scales \u201cabsolutely\u201d-sized images\u2014those whose sizes are given in units of pixels, points, millimetres, inches, etc. Scaling will not be done to images whose sizes expressed in relative units like, em (relative to the font size), % (relative to the parent element\u2019s size) and similar. We assume that relative units express the user\u2019s final preference for how large an image should be. (Relative units are unlikely to be present unless the user, or the author of a build module, has explicitly added them.) 5.4. Resource Rules Resource rules are functions defined within build files and passed to one of embed_rule() , resource_hash_rule() or scale_rule() as appropriate. Lamarkdown will then call the function for each of various resources (images, etc.) that may need to be embedded, hashed, or scaled. Such functions can accept the following keyword parameters, to help them determine what kind of resource they are dealing with, and so decide what to do with it: Parameter Type Description url string or None The location of the resource; e.g., https://example.com/image.jpg . tag string or None The HTML tag of the element representing the resource; e.g. img , style , etc. mime string or None The MIME type of the resource; e.g., image/png , text/css , etc. This may be the result of probing the resource\u2019s content. attr string-to-string dictionary or None Any attributes assigned to the enclosing HTML element. Each of these may be None in certain circumstances, and a rule function must be designed accordingly, with appropriate default behaviour. A rule function should also accept a **kwargs parameter, for future-proofing, should a future version of Lamarkdown provide additional keyword arguments. A rule function returns a value specific to the type of processing it governs: embed rules return bool , hashing rules return str or None , and scale rules return float or int . 6. Caching To avoid unnecessary delays during compilation, Lamarkdown uses two caches: The \u201cbuild cache\u201d stores results of certain time-consuming processing, particularly the output of external commands like LaTeX (by the la.latex extension ). The build cache is kept in the \u201cbuild directory\u201d, which (by default) is ./build/ . If necessary, you can cause Lamarkdown to delete any pre-existing entries in the build cache with the --clean option: $ lamd --clean mydocument.md The \u201cfetch cache\u201d stores downloaded files, obeying (at a basic level) directives received via the \u201cCache-Control\u201d HTTP header. That is, cache entries will expire automatically after a period of time determined by the server (24 hours by default). Lamarkdown downloads and caches files for several purposes; e.g.: To embed files (stylesheets, fonts, images, etc.); To compute hashes of linked (non-embedded) files, if asked to; To find the original dimensions of linked images, when asked to scale them. The fetch cache is not cleared with the --clean option. However, it is safe to manually delete, if you wish. You can determine its location using -v : $ lamd -v The fetch cache is stored in the standard location for user-level caches, and so is reused across all Lamarkdown documents for a given user on a given machine.","title":"Core Functionality"},{"location":"core/#core-functionality","text":"Here we describe Lamarkdown\u2019s core functionality in detail, and how to use it.","title":"Core Functionality"},{"location":"core/#build_files","text":"When compiling a given Markdown file, Lamarkdown first looks for build files . By default, these are: md_build.py , and/or A .py file with the same base name as the Markdown file (e.g., for example.md , it would be example.py ). If both of these exist, both will be loaded, md_build.py first. Build files contain executable Python code that makes calls to the Build File API , to apply Markdown extensions, provide document style information, and otherwise programmatically hook into the compilation process. If build file(s) exist, but are empty, Lamarkdown will revert to the most basic syntax and functionality supported by Python-Markdown, and produce unstyled output. However, if you run Lamarkdown without a build file, it behave as if the following build file was given: import lamarkdown as la la . m . doc () The m.doc() build module adds a certain set of Markdown extensions, as well as styling the output to better resemble a conventional document. When writing a build file, you can include or omit m.doc() , as per your preference. To add a Markdown extension, you call the lamarkdown module itself. Many extensions have their own settings, which you can configure by passing keyword arguments. If you don\u2019t need to supply any extension options, you can list multiple extensions in one call: import lamarkdown as la la ( 'attr_list' , 'admonition' ) la ( 'toc' , marker = '[[TOC]]' , title = 'Contents' ) To add styling information, call css() or css_files() : import lamarkdown as la la . css ( ''' .note { border: 1px solid #0080c0; background: #80c0ff; padding: 0.5em; } ''' ) la . css_files ( 'style1.css' , 'style2.css' ) By default, CSS files provided to css_files() will actually be embedded in the output, rather than linked, because the goal of Lamarkdown is broadly to create standalone output files. The following command-line options affect how build-files are loaded: Option Description -b / --build FILE Load an (additional) build file. -B / --no-auto-build-files Don\u2019t try to load the default build files ( md_build.py or <source>.py ), even if they exist. -D / --no-build-defaults Even if no build files are loaded, don\u2019t apply the defaults.","title":"1. Build Files"},{"location":"core/#directives","text":"Lamarkdown adopts a convention, whereby authors may add specially-named attributes to parts of the document, which cause Lamarkdown (or a Lamarkdown extension) to perform certain kinds of structural transformations. These attributes are called directives . Their names begin with - (e.g., -label ), to distinguish them from genuine HTML attributes. Directives are (if validly specified) deleted before the final output is generated. This approach relies on the attr_list or la.attr_prefix extensions (designed to let authors add HTML attributes to elements). Thus, all directive processing must happen after these extensions have run. Specific directives include the following: Directive Description -caption With the la.captions extension, this identifies the caption for a figure or table, and causes both to be wrapped (if appropriate) within a <figure> element. -list-table With the la.list_tables extension, and when applied to a list (containing nested lists), this converts it into a table -label=... With the la.labels extension, and when applied to a heading, list, figure or table, this specifies a template for the numbering of that element. -no-label With the la.labels extension, when applied to an element, causes any labelling to be omitted. -scale=... When applied to an image, this scales both dimensions of the image by a linear factor. -abs-scale When applied to an image, this disregards any global scaling rule. Directives have a long(er) form, starting with md- (e.g., md-caption ). The short - form is converted to the long md- form during Markdown processing, so that they won\u2019t be rejected by subsequent HTML parsing. It is not generally necessary to use the long form inside Markdown documents, but it is possible. Design Notes The - at the start of directives is intended to minimise confusion relative to other possible syntactic choices, while requiring no extra Markdown parsing code beyond the existing attr_list extension (though sometimes directives need to appear in places that require the la.attr_prefix extension). It\u2019s useful to have some means of distinguishing directives from ordinary HTML attributes, because: The two groups have quite different semantics; and We\u2019d like to avoid possible future conflicts between the two. To address other possible choices: Simply always using md- creates extra clutter. Using a different special character (e.g., !directive=... ) runs into the problem that attr_list converts almost all special characters to _ , so we wouldn\u2019t be able to narrowly define which character we\u2019re actually using. A leading or trailing _ itself (e.g., _directive=... or directive_=... ), even if we could accept the ambiguity, may also imply \u201cprivate/internal/auxiliary use\u201d, especially in connection with Python. A leading : (which isn\u2019t converted to _ ) conflicts somewhat with the enclosing list syntax; e.g., in {:directive=...} , the the : will be parsed as the start of the list, not part of the name. We could insist that authors put a space after the { , but this still leaves room for confusion. A trailing - or : would result in directive-=... or directive:=... , where -= and := both have the misleading appearance of a special operator. A XML namespace (e.g., md:directive=... ) creates extra clutter, and would also raise questions about how to formally define that namespace, and how it formally relates to HTML. HTML attributes are case-insensitive, so a convention based on casing (e.g., Directive=... ) risks unforeseen conflicts in the event of case folding. Anything more elaborate is unlikely to be recognised by attr_list , and would require separate parsing.","title":"2. Directives"},{"location":"core/#variants","text":"Lamarkdown can generate multiple output files, each with different build configuration, given a single input file. To arrange this, call variants() and pass in one or more functions that will configure each variant: import lamarkdown as la def light_mode (): # Apply to variant #1 la . css ( 'body { color: black; background: white; }' ) def dark_mode () # Apply to variant #2 la . css ( 'body { color: white; background: black; }' ) la . variants ( light_mode , dark_mode ) # Apply to all variants la . css ( 'body { font-family: sans-serif; }' ) You can create nested variants by calling variants() within a variant function, though be careful to avoid infinite recursion. Two variants may specify any arbitrarily-different options, including different Markdown extensions, and/or extension options. In such a case, Lamarkdown will invoke Python-Markdown separately for each distinct extension configuration (possibly resulting in multiple different interpretations of the same Markdown syntax, depending on the options chosen). By default, the output filenames will have the function name appended. In the above example, if the Markdown file is example.md , then Lamarkdown will generate example_light_mode.html and example_dark_mode.html . If you prefer one variant to take on the \u201coriginal\u201d (unmodified) filename, call la.basename() (no arguments) in the appropriate variant function.","title":"3. Variants"},{"location":"core/#allow_exec","text":"If you\u2019re just compiling your own (or trusted) documents, it\u2019s perfectly fine and useful to set allow_exec == True . There are two ways: Add the -e / --allow-exec command-line option; and/or Assign to the allow_exec property: import lamarkdown as la la . allow_exec = True ... It\u2019s currently not recommended to run Lamarkdown on untrusted documents at all , unless your entire execution environment is sandboxed. Nevertheless, the allow_exec flag attempts to provide some measure of safety in such situations. By default, allow_exec == False , in which case certain actions will not be permitted: Use of the la.eval extension will be restricted to text substitutions (not code execution); Use of the la.markdown_demo extension will be prohibited; Use of Matplotlib and R-plotting, by means of m.plots() , will be prohibited. In general, these restrictions rely on the cooperation of relevant Markdown extensions and build modules. Thus, if you rely on allow_exec being False , you are also relying on each individual extension/module to prohibit executable code. Non-Lamarkdown extensions won\u2019t generally even be aware of the allow_exec flag, so you must exercise care.","title":"4. The allow_exec Option"},{"location":"core/#resources","text":"Lamarkdown performs certain transformations on parts of the HTML document after Python-Markdown has finished. Design Notes One might ask why embedding, hashing and scaling are part of Lamarkdown\u2019s core behaviour, rather than implemented as extensions. There are problems with designing extensions to perform these actions: They rely on identifying and modifying specific HTML elements, which requires a document tree. Python-Markdown makes such trees available during the \u201ctree processing\u201d stage, but some kinds of resources don\u2019t appear until the later \u201cpostprocessing\u201d stage (having been represented only with special placeholder text, and otherwise kept isolated up until then). They involve styles and scripts, which are essentially outside the scope of Python-Markdown\u2019s operation altogether.","title":"5. Resource Processing"},{"location":"core/#embedding","text":"By default, Lamarkdown will embed external resources in the output HTML file (with some default exclusions). The goal is to create a standalone output file, though it may be comparatively large for an HTML file. In most cases, the resources being embedded will be CSS styles, fonts, scripts, and images. Embedding is performed automatically, by either: Moving the contents of directly-referenced .css and .js files into <style> and <script> elements, as appropriate, within the HTML document; or In other cases, converting a resource into a data URL . Font files will be subsetted (unused characters removed) before being embedded. Styles will be recursively embedded, since CSS files can reference other resources, including other CSS files. Lamarkdown will not currently attempt to resolve resources referenced by scripts, though. Ordinary hypertext links are not embedded (and not considered embeddable). By default, Lamarkdown will also exclude audio and video files, and the contents of any <iframe> elements, since these could make the output unmanageably large. However, the option is open to embed these anyway if you wish. You can provide an \u201cembed rule \u201d to override the default behaviour, if needed: import lamarkdown as la def embed_rule ( url : str | None , tag : str | None , mime : str | None , attr : dict [ str , str ] | None , ** kwargs ) -> bool : return ... la . embed ( embed_rule ) This function will be called whenever Lamarkdown encounters an embeddable resource, and must return True to embed the resource, or False to keep it separate. See Resource Rules below for more details. Efficiency Notes Data URLs use Base-64 encoding, which increases the size of the data by one third, rounding up, since it uses 8 bits to represent only 6 bits. This effect compounds with nested embedding. While a single CSS file is embedded directly in a <style> element, any further CSS files it imports itself will be represented as data URLs, and these in turn may have other data URLs nested inside. Lamarkdown does not (currently) try to \u201cflatten out\u201d CSS imports, because it cannot guarantee that this would be functionally equivalent to the original arrangement, because of certain ordering semantics defined in CSS. Thus, if you have several levels of indirection in your CSS imports, the resulting embedded content will be stored in a highly inefficient manner. It may be worth avoiding such arrangements.","title":"5.1. Embedding"},{"location":"core/#hashing","text":"Lamarkdown can arrange for the output document to contain a hash (SHA-256, SHA-384 or SHA-512) for each of its external resources, so the browser can verify their integrity . This applies specifically to non - embedded resources. Lamarkdown does not perform hashing by default. To make it do so, define a \u201cresource hash rule \u201d: import lamarkdown as la def hash_rule ( url : str | None , tag : str | None , mime : str | None , attr : dict [ str , str ] | None , ** kwargs ) -> str | None : return ... la . resource_hash_rule ( hash_rule ) This function will be called whenever Lamarkdown needs to know whether and how to compute a resource hash. It must return either None (for no hashing) or one of the strings 'sha256' , 'sha384' or 'sha512' , representing corresponding hashing algorithms. See Resource Rules below for more details. Where a hash is required, Lamarkdown will assume that the currently-available version of the resource is the one you want, and will compute a hash based on it. The hash will appear as the value of the integrity HTML attribute in the output document. Lamarkdown will not compare the hash to anything; this will be left up to the browser, when the document is loaded by readers in the future. Hashing is a compromise between the control afforded by embedding, and the smaller file sizes offered by not embedding. Embedding may (depending on the particular files) significantly increase the file size of the output document. But with non-embedded, non-hashed resources, you must trust the external source(s), because you are ceding control over aspects of the document. For instance, if your document links to http://example.com/image.jpg , then your document will show whatever that image is at the time. If/when the image is replaced on the server, your document will show the new version, and for a reader, there won\u2019t be any sign that it\u2019s not the original. The same and worse could happen for stylesheets and scripts. An external entity with control over a stylesheet or script in your document could choose to disable or arbitrarily modify your entire document remotely, for anyone reading it. With embedded or hashed resources, these are no longer possibilities. However, resource hashing lacks other advantages of embedded resources: Readers require an internet connection to view hashed resources, and must wait a moment for them to load, while embedded resources will be available offline and practically instantaneously. An external entity (controlling a hashed resource) might be able to track readers of the document, by recording requests for the document\u2019s external resource(s) and mapping them to readers\u2019 IP addresses. Hashing won\u2019t protect the document against its resources being moved or deleted. There\u2019s also a chance that you may want the external source to be able to change the resource arbitrarily. In this case, a non-embedded, non-hashed resource would be appropriate.","title":"5.2. Hashing"},{"location":"core/#scaling","text":"Lamarkdown can adjust the size of images in a document by a linear scaling factor. This applies to any mechanism for generating or inserting images; e.g.: The standard Markdown notation: ![Alt text](http://example.com/image.jpg) . Latex code compiled into SVG using the la.latex extension. SVGs produced by Graphviz, matplotlib, etc., via the m.plots build module. Anything else that creates <svg> or <img> elements. For any given image, there are (potentially) two different scaling factors: You can give a per-image scaling factor using the -scale=... directive ; e.g.: ![ Alt text ]( http://example.com/image.jpg ){-scale=\"2.5\"} You can define a \u201cscale rule \u201d: import lamarkdown as la def scale_rule ( url : str | None , tag : str | None , mime : str | None , attr : dict [ str , str ] | None , ** kwargs ) -> float | int : return ... la . scale_rule ( scale_rule ) This function is called for each image in the document (or at least the body of the document). It must return a float or int representing a scaling factor. See Resource Rules below for more details. These two numbers (both 1 by default) are multiplied to get the actual scaling factor for a given image. So, if an image has {-scale=\"2\"} , and the scale rule returns 3, then the image will be scaled by a factor of 6. That is, unless the -abs-scale directive is given. This will cause the scale rule to be ignored, so that: For {-scale=\"2\" -abs-scale} , the image will be scaled by a factor of 2, irrespective of the scale rule; and For {-abs-scale} , the image won\u2019t be scaled at all. Scaling only alters the size information present in the HTML document. It doesn\u2019t affect the actual image content, and so it applies equally to embedded and linked images, and to (practically) any image format supported by web browsers. However, Lamarkdown only scales \u201cabsolutely\u201d-sized images\u2014those whose sizes are given in units of pixels, points, millimetres, inches, etc. Scaling will not be done to images whose sizes expressed in relative units like, em (relative to the font size), % (relative to the parent element\u2019s size) and similar. We assume that relative units express the user\u2019s final preference for how large an image should be. (Relative units are unlikely to be present unless the user, or the author of a build module, has explicitly added them.)","title":"5.3. Scaling"},{"location":"core/#rules","text":"Resource rules are functions defined within build files and passed to one of embed_rule() , resource_hash_rule() or scale_rule() as appropriate. Lamarkdown will then call the function for each of various resources (images, etc.) that may need to be embedded, hashed, or scaled. Such functions can accept the following keyword parameters, to help them determine what kind of resource they are dealing with, and so decide what to do with it: Parameter Type Description url string or None The location of the resource; e.g., https://example.com/image.jpg . tag string or None The HTML tag of the element representing the resource; e.g. img , style , etc. mime string or None The MIME type of the resource; e.g., image/png , text/css , etc. This may be the result of probing the resource\u2019s content. attr string-to-string dictionary or None Any attributes assigned to the enclosing HTML element. Each of these may be None in certain circumstances, and a rule function must be designed accordingly, with appropriate default behaviour. A rule function should also accept a **kwargs parameter, for future-proofing, should a future version of Lamarkdown provide additional keyword arguments. A rule function returns a value specific to the type of processing it governs: embed rules return bool , hashing rules return str or None , and scale rules return float or int .","title":"5.4. Resource Rules"},{"location":"core/#caching","text":"To avoid unnecessary delays during compilation, Lamarkdown uses two caches: The \u201cbuild cache\u201d stores results of certain time-consuming processing, particularly the output of external commands like LaTeX (by the la.latex extension ). The build cache is kept in the \u201cbuild directory\u201d, which (by default) is ./build/ . If necessary, you can cause Lamarkdown to delete any pre-existing entries in the build cache with the --clean option: $ lamd --clean mydocument.md The \u201cfetch cache\u201d stores downloaded files, obeying (at a basic level) directives received via the \u201cCache-Control\u201d HTTP header. That is, cache entries will expire automatically after a period of time determined by the server (24 hours by default). Lamarkdown downloads and caches files for several purposes; e.g.: To embed files (stylesheets, fonts, images, etc.); To compute hashes of linked (non-embedded) files, if asked to; To find the original dimensions of linked images, when asked to scale them. The fetch cache is not cleared with the --clean option. However, it is safe to manually delete, if you wish. You can determine its location using -v : $ lamd -v The fetch cache is stored in the standard location for user-level caches, and so is reused across all Lamarkdown documents for a given user on a given machine.","title":"6. Caching"},{"location":"tour/","text":"Lamarkdown Tour Many Lamarkdown features are available out-of-the-box, without any configuration. You need only write the actual .md file, and compile it. However, by providing a build file , even a blank one, these defaults are put aside, and you can more precisely specify the settings you want. The following examples include a minimal build file (consisting of Python code), to provide context for each feature, even though many features are still available by default if no build file exists. You may like to read about conventional Markdown syntax , if you\u2019re not already familiar with it. 1. Using (Non-Lamarkdown) Extensions Lamarkdown uses the Python-Markdown engine, so it supports existing Python-Markdown extensions , including the PyMdown Extensions . Here\u2019s a couple of examples: # md_build.py import lamarkdown as la la ( 'tables' ) la . css ( 'td { border: 1px solid blue; }' ) ## Standard [tables][] extension Column A | Column B --------- | -------- Red | Green Blue | Yellow [ tables ]: https://python-markdown.github.io/extensions/tables/ # md_build.py import lamarkdown as la la ( 'pymdownx.critic' , mode = 'view' ) ## PyMdown [critic][] extension Some text {~~to which~>with~~} insertions and deletions{-- can be made--}. [ critic ]: https://facelessuser.github.io/pymdown-extensions/extensions/critic/ 2. Citations and Reference Lists The la.cite extension formats in-text citations and builds a reference list. You provide a BibTeX-formatted file containing reference information, and insert citations of the form [@refkey] , or [@abc, @xyz, p. 5] , for instance. (This citation format was inspired by Pandoc\u2019s citation syntax . The extension uses the Pybtex library to read .bib files and construct a bibliography.) import lamarkdown as la la ( 'la.cite' , file = 'references.bib' ) # references.bib @article { refA , author = \"An Author\" , title = \"A Title\" , journal = \"The Journal\" , year = \"1990\" } ## Referencing Example Here's a citation [@refA, p. 10]. ### References ///References Go Here/// (Note: this is unstyled.) 3. Numbering and Cross-Referencing The la.labels extension can assign automatic numbers to headings, list items, figures and tables. Use the -label=\"...\" directive to specify what to number and how. If you link to another part of the same document using an ID (e.g., #myid ), the link text may contain ## , which will be replaced with the label for the linked part of the document (stripped of any fixed prefix/suffix characters). import lamarkdown as la la ( 'attr_list' , 'la.labels' ) ## Section {-label=\"1. ,X.1. \"} References to subsections [ ## ]( #secX ) and [ ## ]( #secY ). ### Subsection {#secX} See [ Appx-## ]( #appx ) for details. ### Subsection {#secY} ## Section ## Appendix { #appx -label=\"A. \" } ## Appendix For lists, the la.attr_prefix extension provides a way to attach -label to the list: import lamarkdown as la la ( 'la.attr_prefix' , 'la.labels' ) A list: {-label=\"(a) ,[i] \"} 1. List item 2. List item 1. Sublist item {#itemX} 2. Sublist item Reference to [ item ## ]( #itemX ). 4. Embedding LaTeX The la.latex extension lets you write LaTeX code in your Markdown document, and have the results embedded in the HTML output. This supports mathematical equations, as well as LaTeX-based diagramming code (e.g., using PGF/TikZ ). First, you can embed LaTeX mathematical code by enclosing it inside $...$ (for inline maths) or $$...$$ (for block-style maths): import lamarkdown as la la ( 'la.latex' ) The quadratic formula is: $$x = \\frac{-b \\pm \\sqrt{b^2 - 4ac}}{2a}$$ where $x$ is a root of a quadratic equation, and $a$, $b$ and $c$ are coefficients. Second, you can write a LaTeX environment (or an entire LaTeX document) directly inside the Markdown file, where it will be compiled with \u201cpdflatex\u201d (or equivalent), assuming you have it installed: import lamarkdown as la la ( 'la.latex' , pdf_svg_converter = 'pdf2svg' ) ## LaTeX diagram \\begin{tikzpicture}[nodes={draw,circle}, font=\\LARGE\\bfseries] \\node at(0, 0) [red] (A) {A}; \\node at(3, 0) [blue] (B) {B}; \\node at(1.5,2) [green!50!black] (C) {C}; \\draw (A) -- (B) -- (C) -- (A); \\end{tikzpicture} { alt=\"Three circles, A, B and C, with connecting lines.\" } This is a diagram drawn in LaTeX, using PGF/TikZ, and embedded in the document as an SVG image. 5. Captions The la.captions extension lets you specify captions for any block element, which will then be wrapped in an HTML <figure> element, if appropriate. Simply write the caption in a paragraph (or blockquote containing several paragraphs) above the element-to-be-captioned, and attach the -caption directive. import lamarkdown as la la ( 'la.captions' , 'tables' ) la . css ( 'td { border: 1px solid blue; }' 'table > caption { font-style: italic; }' ) An enigmatic taxonomy of colours. {-caption} Column A | Column B --------- | -------- Red | Green Blue | Yellow In combination with la.labels , you can number your figures and tables: import lamarkdown as la la ( 'la.captions' ) la ( 'la.latex' , pdf_svg_converter = 'pdf2svg' ) la ( 'la.labels' , labels = { 'figure' : '\"Figure\" 1. ' }) la . css ( 'figure { background: #ffe0c0; ' ' padding: 0.5em; }' 'figcaption { margin-bottom: 0.5em; }' 'figcaption .la-label { font-weight: bold; }' ) Some text beforehand. A schematic representation of alphabetic distance. {-caption} \\begin{tikzpicture}[nodes={draw,circle}, font=\\LARGE\\bfseries] \\draw[thick] (0,0) node[left] {A} -> +(5,0) node[right] {B}; \\end{tikzpicture} Some text afterwards. 6. Other Diagramming/Plotting Approaches Lamarkdown is pre-configured to invoke various other external plotting libraries/tools when requested. (To accomplish this, it uses the PyMdown \u201csuperfences\u201d extension.) Each of these libraries/tools must be installed separately. import lamarkdown as la la . m . plots () ## Graphviz diagram ```graphviz-neato digraph mygraph { A -> B -> C -> D; B -> D; } ``` import lamarkdown as la la . m . plots () la . allow_exec = True ## Matplotlib ```matplotlib import matplotlib.pyplot as plt fig, ax = plt.subplots() fig.set_size_inches(4, 2.5) ax.bar(['No', 'Yes'], [40, 60], color=['tab:red', 'tab:blue']) ax.set_ylabel('Percentage') ax.set_title('Agreement') ``` import lamarkdown as la la . m . plots () la . allow_exec = True ## R plotting ```r-plot dev.new(width = 5, height = 2.5) par(mar = c(2, 4, 2, 0)) barplot( c(No = 40, Yes = 60), ylab = 'Percentage', main = 'Agreement', col = c('brown2', 'deepskyblue3') ) ``` import lamarkdown as la la . m . plots () ## PlantUML ```plantuml @startuml left to right direction class Contact { name: String } class Address {} Contact o-- \"0..*\" Address @enduml ``` 7. List Tables There are limitations to the simple tables you can create with the standard \u201ctables\u201d extension (as shown in section 1 ). These do not permit arbitrary content in each table cell. For greater flexibility, the la.list_tables extension lets you write out the contents of a table as a series of nested lists (inspired by reStructuredText). import lamarkdown as la la ( 'la.list_tables' ) la . css ( 'td, th { border: 1px solid blue; }' ) {-list-table} * # - Heading A - Subheading AA - Subheading AB - Heading B * - Block quote: > Something someone famous once said. - Actual list: * Item 1 * Item 2 - Code: ``` print(\"Hello world\") ``` 8. Variants Lamarkdown can generate multiple output HTML files from a single Markdown input file, each with arbitrarily-different configuration options. In the build file, simply define a function representing each variant , make the appropriate API calls in each such function, and pass the functions to la.variants() . To support a common use case, Lamarkdown also provides a prune() API function, which deletes any parts of the output document matching a given CSS-style selector. If this is done in only one variant, you can keep private notes in your Markdown file, and produce separate HTML files with and without them. import lamarkdown as la def private (): la . css ( '.priv { background: #ff8080 }' ) def public (): la . prune ( '.priv' ) la . variants ( private , public ) la ( 'attr_list' ) ## For _private_{.priv} discussion Here's some public information... But my readers don't need to know _this_ ... {.priv} example_private.html example_public.html","title":"Tour"},{"location":"tour/#lamarkdown-tour","text":"Many Lamarkdown features are available out-of-the-box, without any configuration. You need only write the actual .md file, and compile it. However, by providing a build file , even a blank one, these defaults are put aside, and you can more precisely specify the settings you want. The following examples include a minimal build file (consisting of Python code), to provide context for each feature, even though many features are still available by default if no build file exists. You may like to read about conventional Markdown syntax , if you\u2019re not already familiar with it.","title":"Lamarkdown Tour"},{"location":"tour/#extensions","text":"Lamarkdown uses the Python-Markdown engine, so it supports existing Python-Markdown extensions , including the PyMdown Extensions . Here\u2019s a couple of examples: # md_build.py import lamarkdown as la la ( 'tables' ) la . css ( 'td { border: 1px solid blue; }' ) ## Standard [tables][] extension Column A | Column B --------- | -------- Red | Green Blue | Yellow [ tables ]: https://python-markdown.github.io/extensions/tables/ # md_build.py import lamarkdown as la la ( 'pymdownx.critic' , mode = 'view' ) ## PyMdown [critic][] extension Some text {~~to which~>with~~} insertions and deletions{-- can be made--}. [ critic ]: https://facelessuser.github.io/pymdown-extensions/extensions/critic/","title":"1. Using (Non-Lamarkdown) Extensions"},{"location":"tour/#2-citations-and-reference-lists","text":"The la.cite extension formats in-text citations and builds a reference list. You provide a BibTeX-formatted file containing reference information, and insert citations of the form [@refkey] , or [@abc, @xyz, p. 5] , for instance. (This citation format was inspired by Pandoc\u2019s citation syntax . The extension uses the Pybtex library to read .bib files and construct a bibliography.) import lamarkdown as la la ( 'la.cite' , file = 'references.bib' ) # references.bib @article { refA , author = \"An Author\" , title = \"A Title\" , journal = \"The Journal\" , year = \"1990\" } ## Referencing Example Here's a citation [@refA, p. 10]. ### References ///References Go Here/// (Note: this is unstyled.)","title":"2. Citations and Reference Lists"},{"location":"tour/#3-numbering-and-cross-referencing","text":"The la.labels extension can assign automatic numbers to headings, list items, figures and tables. Use the -label=\"...\" directive to specify what to number and how. If you link to another part of the same document using an ID (e.g., #myid ), the link text may contain ## , which will be replaced with the label for the linked part of the document (stripped of any fixed prefix/suffix characters). import lamarkdown as la la ( 'attr_list' , 'la.labels' ) ## Section {-label=\"1. ,X.1. \"} References to subsections [ ## ]( #secX ) and [ ## ]( #secY ). ### Subsection {#secX} See [ Appx-## ]( #appx ) for details. ### Subsection {#secY} ## Section ## Appendix { #appx -label=\"A. \" } ## Appendix For lists, the la.attr_prefix extension provides a way to attach -label to the list: import lamarkdown as la la ( 'la.attr_prefix' , 'la.labels' ) A list: {-label=\"(a) ,[i] \"} 1. List item 2. List item 1. Sublist item {#itemX} 2. Sublist item Reference to [ item ## ]( #itemX ).","title":"3. Numbering and Cross-Referencing"},{"location":"tour/#4-embedding-latex","text":"The la.latex extension lets you write LaTeX code in your Markdown document, and have the results embedded in the HTML output. This supports mathematical equations, as well as LaTeX-based diagramming code (e.g., using PGF/TikZ ). First, you can embed LaTeX mathematical code by enclosing it inside $...$ (for inline maths) or $$...$$ (for block-style maths): import lamarkdown as la la ( 'la.latex' ) The quadratic formula is: $$x = \\frac{-b \\pm \\sqrt{b^2 - 4ac}}{2a}$$ where $x$ is a root of a quadratic equation, and $a$, $b$ and $c$ are coefficients. Second, you can write a LaTeX environment (or an entire LaTeX document) directly inside the Markdown file, where it will be compiled with \u201cpdflatex\u201d (or equivalent), assuming you have it installed: import lamarkdown as la la ( 'la.latex' , pdf_svg_converter = 'pdf2svg' ) ## LaTeX diagram \\begin{tikzpicture}[nodes={draw,circle}, font=\\LARGE\\bfseries] \\node at(0, 0) [red] (A) {A}; \\node at(3, 0) [blue] (B) {B}; \\node at(1.5,2) [green!50!black] (C) {C}; \\draw (A) -- (B) -- (C) -- (A); \\end{tikzpicture} { alt=\"Three circles, A, B and C, with connecting lines.\" } This is a diagram drawn in LaTeX, using PGF/TikZ, and embedded in the document as an SVG image.","title":"4. Embedding LaTeX"},{"location":"tour/#5-captions","text":"The la.captions extension lets you specify captions for any block element, which will then be wrapped in an HTML <figure> element, if appropriate. Simply write the caption in a paragraph (or blockquote containing several paragraphs) above the element-to-be-captioned, and attach the -caption directive. import lamarkdown as la la ( 'la.captions' , 'tables' ) la . css ( 'td { border: 1px solid blue; }' 'table > caption { font-style: italic; }' ) An enigmatic taxonomy of colours. {-caption} Column A | Column B --------- | -------- Red | Green Blue | Yellow In combination with la.labels , you can number your figures and tables: import lamarkdown as la la ( 'la.captions' ) la ( 'la.latex' , pdf_svg_converter = 'pdf2svg' ) la ( 'la.labels' , labels = { 'figure' : '\"Figure\" 1. ' }) la . css ( 'figure { background: #ffe0c0; ' ' padding: 0.5em; }' 'figcaption { margin-bottom: 0.5em; }' 'figcaption .la-label { font-weight: bold; }' ) Some text beforehand. A schematic representation of alphabetic distance. {-caption} \\begin{tikzpicture}[nodes={draw,circle}, font=\\LARGE\\bfseries] \\draw[thick] (0,0) node[left] {A} -> +(5,0) node[right] {B}; \\end{tikzpicture} Some text afterwards.","title":"5. Captions"},{"location":"tour/#6-other-diagrammingplotting-approaches","text":"Lamarkdown is pre-configured to invoke various other external plotting libraries/tools when requested. (To accomplish this, it uses the PyMdown \u201csuperfences\u201d extension.) Each of these libraries/tools must be installed separately. import lamarkdown as la la . m . plots () ## Graphviz diagram ```graphviz-neato digraph mygraph { A -> B -> C -> D; B -> D; } ``` import lamarkdown as la la . m . plots () la . allow_exec = True ## Matplotlib ```matplotlib import matplotlib.pyplot as plt fig, ax = plt.subplots() fig.set_size_inches(4, 2.5) ax.bar(['No', 'Yes'], [40, 60], color=['tab:red', 'tab:blue']) ax.set_ylabel('Percentage') ax.set_title('Agreement') ``` import lamarkdown as la la . m . plots () la . allow_exec = True ## R plotting ```r-plot dev.new(width = 5, height = 2.5) par(mar = c(2, 4, 2, 0)) barplot( c(No = 40, Yes = 60), ylab = 'Percentage', main = 'Agreement', col = c('brown2', 'deepskyblue3') ) ``` import lamarkdown as la la . m . plots () ## PlantUML ```plantuml @startuml left to right direction class Contact { name: String } class Address {} Contact o-- \"0..*\" Address @enduml ```","title":"6. Other Diagramming/Plotting Approaches"},{"location":"tour/#7-list-tables","text":"There are limitations to the simple tables you can create with the standard \u201ctables\u201d extension (as shown in section 1 ). These do not permit arbitrary content in each table cell. For greater flexibility, the la.list_tables extension lets you write out the contents of a table as a series of nested lists (inspired by reStructuredText). import lamarkdown as la la ( 'la.list_tables' ) la . css ( 'td, th { border: 1px solid blue; }' ) {-list-table} * # - Heading A - Subheading AA - Subheading AB - Heading B * - Block quote: > Something someone famous once said. - Actual list: * Item 1 * Item 2 - Code: ``` print(\"Hello world\") ```","title":"7. List Tables"},{"location":"tour/#8-variants","text":"Lamarkdown can generate multiple output HTML files from a single Markdown input file, each with arbitrarily-different configuration options. In the build file, simply define a function representing each variant , make the appropriate API calls in each such function, and pass the functions to la.variants() . To support a common use case, Lamarkdown also provides a prune() API function, which deletes any parts of the output document matching a given CSS-style selector. If this is done in only one variant, you can keep private notes in your Markdown file, and produce separate HTML files with and without them. import lamarkdown as la def private (): la . css ( '.priv { background: #ff8080 }' ) def public (): la . prune ( '.priv' ) la . variants ( private , public ) la ( 'attr_list' ) ## For _private_{.priv} discussion Here's some public information... But my readers don't need to know _this_ ... {.priv} example_private.html example_public.html","title":"8. Variants"},{"location":"extensions/","text":"Extensions Lamarkdown provides access to Python-Markdown\u2019s extension system , to extend the core markdown language. You can determine which extensions to load in several ways: Accept the defaults (which are in place if you don\u2019t have a build file); Write a build file that calls the lamarkdown package , providing one or more extension names (or Extension objects, typically if you want to create your own extensions ): import lamarkdown as la la ( 'attr_list' , 'nl2br' , 'toc' , 'la.cite' , 'pymdownx.extra' ) la ( 'la.latex' , tex = 'pdflatex' ) Write a build file that calls m.doc() , or another build module that happens to load extension(s); or To avoid extensions altogether, simply write a build file that doesn\u2019t load any extensions. (This would include avoiding calls to m.doc() and other build modules.) 1. Standard Lamarkdown Extensions Extension Description In m.doc() la.attr_prefix Permits HTML attributes, including directives , to be specified above a block element (in contrast to attr_list , where they must come below). Notably, this allows attributes/directives to be applied to list elements (whether numbered or bullet-pointed). \u2705 la.captions Lets you to assign paragraphs to be captions of tables or images. \u2705 la.cite Builds a bibliography based on Bibtex-formatted reference file(s), and in-text citations of the form [@citation_key] (or [@key1 p.15, @key2] , etc.). \u2705 la.eval Lets you insert placeholders using the syntax $`...` , to be replaced by corresponding values defined in the build file. If allow_code is enabled, this also lets you insert full Python expressions, which will be evaluated and replaced by their result. \u2705 ( allow_code is False by default) la.labels Adds numbering schemes to headings, lists, figures and/or tables, and permits cross-referencing. \u2705 la.latex Lets you insert LaTeX code, generally for mathematical or diagramming purposes. \u2705 la.list_tables Lets you specify the content of a table using nested lists, in order to maintain Markdown readability while permitting arbitrary content within a table. \u2705 la.markdown_demo Supports this documentation by formatting sample build files and Markdown input, while also compiling them to produce the corresponding output, shown within an <iframe> . la.sections Lets you divide a document into <section> elements using --- dividers, which may be used to create slideshows with RevealJS , for instance. 2. Standard Python Markdown Extensions These extensions are bundled with the core Python Markdown engine, on which Lamarkdown is based. Extension Description In m.doc() ? abbr For abbreviations, using the <abbr> HTML element. \u2705 admonition For creating callout/admonition boxes, such as for notes, warnings, etc. \u2705 attr_list For adding HTML attributes to various elements (which in turn enables CSS styling). \u2705 codehilite Consider pymdownx.superfences + pymdownx.highlight instead. def_list For creating definition lists, using the <dl> , <dt> and <dd> HTML elements. \u2705 extra Shortcut for abbr , attr_list , def_list , fenced_code , footnotes , md_in_html , tables . Consider pymdownx.extra instead. fenced_code Consider pymdownx.superfences instead. footnotes For defining labelled footnotes. \u2705 legacy_attrs Deprecated. legacy_em For emphasis syntax that more closely matches the markdown reference implementation. md_in_html For nesting Markdown syntax inside embedded HTML. \u2705 meta For adding key-value metadata to the top of markdown files. \u2705 nl2br For treating single newlines in markdown as hard line breaks (rather than whitespace). sane_lists Slightly nicer handling of markdown lists. smarty For auto-replacing quotes, ellipses and dashes with proper, non-ASCII symbols. \u2705 tables For creating simple tables. \u2705 toc Creates a table of contents based on headings in the document. wikilinks Provides a wiki-style link syntax. This may not work well with Larmarkdown. 3. PyMdown Extensions These extensions together form a major 3rd-party package. Lamarkdown has a dependency on PyMdown extensions, so they (like those above) are available by default. Extension Description In m.doc() ? pymdownx.arithmatex Preserves Latex math equations during compilation, so they can be parsed and displayed by Javascript libraries (like MathJax or KaTeX) when the output document is viewed. pymdownx.b64 Consider using Lamarkdown\u2019s built-in media embedding instead. pymdownx.betterem Tweaks the handling of emphasis syntax ( _ and * ). \u2705 pymdownx.blocks Supports a secondary extension system pymdownx.caret For superscript and insertions with the ^ character, using the <sup> and <ins> HTML elements. See also pymdownx.tilde . pymdownx.critic For marking up insertions and deletions, optionally displayed, using <ins> and <del >. pymdownx.details For hidable/expandable content using the <details> and <summary> HTML elements. pymdownx.emoji For inserting emojis by name. pymdownx.escapeall Tweaks the handling of \\ to escape any character. pymdownx.extra Shortcut for pymdownx.betterem , pymdownx.superfences , abbr , attr_list , def_list , footnotes , md_in_html , tables . \u2705 pymdownx.highlight Configures code highlighting for pymdownx.inlinehilite and pymdownx.superfences . \u2705 pymdownx.inlinehilite For syntax highlighting of inline code snippets within `...` . pymdownx.keys For showing keyboard keys, using the <kbd> HTML element. pymdownx.magiclink For auto-linking URLs in the text without any special syntax (or with various alternative syntaxes). pymdownx.mark For marking/highlighting text using the <mark> HTML element. pymdownx.pathconverter Generally unnecessary in Larmarkdown. pymdownx.progressbar For showing progress bars (though additional CSS is required). pymdownx.saneheaders Tweaks the handling of # in markdown headers. pymdownx.smartsymbols For inserting various symbols by ASCII characters: (tm) for \u2122, --> for \u2192, etc. pymdownx.snippets For inserting file(s), or parts of a file, into the current markdown document. pymdownx.striphtml Strips HTML attributes from a document (and also comments, but this is unnecessary in Lamarkdown). pymdownx.superfences For multi-line code blocks inside ```...``` ; more flexible version of fenced_code . \u2705 pymdownx.tabbed For creating multiple tabs, each showing different content. pymdownx.tasklist For creating checkboxes for list items. pymdownx.tilde For subscript and deletions with the ~ character, using the <sub> and <del> HTML elements. See also pymdownx.caret .","title":"Overview"},{"location":"extensions/#extensions","text":"Lamarkdown provides access to Python-Markdown\u2019s extension system , to extend the core markdown language. You can determine which extensions to load in several ways: Accept the defaults (which are in place if you don\u2019t have a build file); Write a build file that calls the lamarkdown package , providing one or more extension names (or Extension objects, typically if you want to create your own extensions ): import lamarkdown as la la ( 'attr_list' , 'nl2br' , 'toc' , 'la.cite' , 'pymdownx.extra' ) la ( 'la.latex' , tex = 'pdflatex' ) Write a build file that calls m.doc() , or another build module that happens to load extension(s); or To avoid extensions altogether, simply write a build file that doesn\u2019t load any extensions. (This would include avoiding calls to m.doc() and other build modules.)","title":"Extensions"},{"location":"extensions/#1-standard-lamarkdown-extensions","text":"Extension Description In m.doc() la.attr_prefix Permits HTML attributes, including directives , to be specified above a block element (in contrast to attr_list , where they must come below). Notably, this allows attributes/directives to be applied to list elements (whether numbered or bullet-pointed). \u2705 la.captions Lets you to assign paragraphs to be captions of tables or images. \u2705 la.cite Builds a bibliography based on Bibtex-formatted reference file(s), and in-text citations of the form [@citation_key] (or [@key1 p.15, @key2] , etc.). \u2705 la.eval Lets you insert placeholders using the syntax $`...` , to be replaced by corresponding values defined in the build file. If allow_code is enabled, this also lets you insert full Python expressions, which will be evaluated and replaced by their result. \u2705 ( allow_code is False by default) la.labels Adds numbering schemes to headings, lists, figures and/or tables, and permits cross-referencing. \u2705 la.latex Lets you insert LaTeX code, generally for mathematical or diagramming purposes. \u2705 la.list_tables Lets you specify the content of a table using nested lists, in order to maintain Markdown readability while permitting arbitrary content within a table. \u2705 la.markdown_demo Supports this documentation by formatting sample build files and Markdown input, while also compiling them to produce the corresponding output, shown within an <iframe> . la.sections Lets you divide a document into <section> elements using --- dividers, which may be used to create slideshows with RevealJS , for instance.","title":"1. Standard Lamarkdown Extensions"},{"location":"extensions/#2-standard-python-markdown-extensions","text":"These extensions are bundled with the core Python Markdown engine, on which Lamarkdown is based. Extension Description In m.doc() ? abbr For abbreviations, using the <abbr> HTML element. \u2705 admonition For creating callout/admonition boxes, such as for notes, warnings, etc. \u2705 attr_list For adding HTML attributes to various elements (which in turn enables CSS styling). \u2705 codehilite Consider pymdownx.superfences + pymdownx.highlight instead. def_list For creating definition lists, using the <dl> , <dt> and <dd> HTML elements. \u2705 extra Shortcut for abbr , attr_list , def_list , fenced_code , footnotes , md_in_html , tables . Consider pymdownx.extra instead. fenced_code Consider pymdownx.superfences instead. footnotes For defining labelled footnotes. \u2705 legacy_attrs Deprecated. legacy_em For emphasis syntax that more closely matches the markdown reference implementation. md_in_html For nesting Markdown syntax inside embedded HTML. \u2705 meta For adding key-value metadata to the top of markdown files. \u2705 nl2br For treating single newlines in markdown as hard line breaks (rather than whitespace). sane_lists Slightly nicer handling of markdown lists. smarty For auto-replacing quotes, ellipses and dashes with proper, non-ASCII symbols. \u2705 tables For creating simple tables. \u2705 toc Creates a table of contents based on headings in the document. wikilinks Provides a wiki-style link syntax. This may not work well with Larmarkdown.","title":"2. Standard Python Markdown Extensions"},{"location":"extensions/#3-pymdown-extensions","text":"These extensions together form a major 3rd-party package. Lamarkdown has a dependency on PyMdown extensions, so they (like those above) are available by default. Extension Description In m.doc() ? pymdownx.arithmatex Preserves Latex math equations during compilation, so they can be parsed and displayed by Javascript libraries (like MathJax or KaTeX) when the output document is viewed. pymdownx.b64 Consider using Lamarkdown\u2019s built-in media embedding instead. pymdownx.betterem Tweaks the handling of emphasis syntax ( _ and * ). \u2705 pymdownx.blocks Supports a secondary extension system pymdownx.caret For superscript and insertions with the ^ character, using the <sup> and <ins> HTML elements. See also pymdownx.tilde . pymdownx.critic For marking up insertions and deletions, optionally displayed, using <ins> and <del >. pymdownx.details For hidable/expandable content using the <details> and <summary> HTML elements. pymdownx.emoji For inserting emojis by name. pymdownx.escapeall Tweaks the handling of \\ to escape any character. pymdownx.extra Shortcut for pymdownx.betterem , pymdownx.superfences , abbr , attr_list , def_list , footnotes , md_in_html , tables . \u2705 pymdownx.highlight Configures code highlighting for pymdownx.inlinehilite and pymdownx.superfences . \u2705 pymdownx.inlinehilite For syntax highlighting of inline code snippets within `...` . pymdownx.keys For showing keyboard keys, using the <kbd> HTML element. pymdownx.magiclink For auto-linking URLs in the text without any special syntax (or with various alternative syntaxes). pymdownx.mark For marking/highlighting text using the <mark> HTML element. pymdownx.pathconverter Generally unnecessary in Larmarkdown. pymdownx.progressbar For showing progress bars (though additional CSS is required). pymdownx.saneheaders Tweaks the handling of # in markdown headers. pymdownx.smartsymbols For inserting various symbols by ASCII characters: (tm) for \u2122, --> for \u2192, etc. pymdownx.snippets For inserting file(s), or parts of a file, into the current markdown document. pymdownx.striphtml Strips HTML attributes from a document (and also comments, but this is unnecessary in Lamarkdown). pymdownx.superfences For multi-line code blocks inside ```...``` ; more flexible version of fenced_code . \u2705 pymdownx.tabbed For creating multiple tabs, each showing different content. pymdownx.tasklist For creating checkboxes for list items. pymdownx.tilde For subscript and deletions with the ~ character, using the <sub> and <del> HTML elements. See also pymdownx.caret .","title":"3. PyMdown Extensions"},{"location":"extensions/attr_prefix/","text":"la.attr_prefix This extension permits attributes to be written above a block (perhaps with intervening whitespace). This can be compared to the attr_list extension, where attributes can be written below a block (or to the right of an inline element). la.attr_prefix can assign styles and directives to elements that are inaccessible to attr_list , including lists, block quotes, and tables. To illustrate: import lamarkdown as la la ( 'la.attr_prefix' , 'tables' ) la . css ( '.blue { background: #80c0ff; }' '.orange { background: #ffc080; }' '.fancy { background: #80c0ff; padding: 1em; }' '.fancy * { background: #ffc080; }' ) Ordinary text. {.blue} Text with styling. {.orange} More text with styling. {.fancy} * Styled list item 1 * Styled list item 2 {.fancy} > Here's a block > quote. {.fancy} Column A | Column B -------- | -------- One | Two Three | Four Ordinary text. With the attr_list extension, {.blue} and {.orange} could be written below their respective elements to achieve the same effect. However, there\u2019s no way to do the same for lists, block quotes or tables; attr_list will only assign attributes to individual list items , or elements within a block quote, or table cells. The extension addresses another weakness in attr_list : its attribute lists cannot contain characters that might be interpreted as some type of inline formatting, such as {attr=\"_value_\"} , due to the order of processing. Terminology Note An attribute list refers to the syntax {...} , generally consisting of style-related information. A fuller example of this is {.blue #someid attr=\"value\"} , where .blue indicates a CSS class name, #someid an element ID, and attr=\"value\" is an arbitrary attribute assignment. A list element refers to actual document content to be shown to the reader (rendered in HTML as <ol> or <ul> ). In Markdown, this is simply: * List item 1 * List item 2 Design Notes Kramdown\u2019s syntax provides a precedent for attribute lists appearing above blocks. la.attr_prefix avoids interfering with (or being interfered with by) existing parsing logic, using a two-step process: It finds and parses attribute lists early in Python-Markdown\u2019s \u201cblock processing\u201d phase (during which raw blocks of text are converted into tree elements), creating placeholder tree elements for them without, yet, attaching them to anything else. During the \u201ctree processing\u201d stage, it finally associates each set of attributes with the next (sibling) element in the tree, whatever it is.","title":"la.attr_prefix"},{"location":"extensions/attr_prefix/#laattr_prefix","text":"This extension permits attributes to be written above a block (perhaps with intervening whitespace). This can be compared to the attr_list extension, where attributes can be written below a block (or to the right of an inline element). la.attr_prefix can assign styles and directives to elements that are inaccessible to attr_list , including lists, block quotes, and tables. To illustrate: import lamarkdown as la la ( 'la.attr_prefix' , 'tables' ) la . css ( '.blue { background: #80c0ff; }' '.orange { background: #ffc080; }' '.fancy { background: #80c0ff; padding: 1em; }' '.fancy * { background: #ffc080; }' ) Ordinary text. {.blue} Text with styling. {.orange} More text with styling. {.fancy} * Styled list item 1 * Styled list item 2 {.fancy} > Here's a block > quote. {.fancy} Column A | Column B -------- | -------- One | Two Three | Four Ordinary text. With the attr_list extension, {.blue} and {.orange} could be written below their respective elements to achieve the same effect. However, there\u2019s no way to do the same for lists, block quotes or tables; attr_list will only assign attributes to individual list items , or elements within a block quote, or table cells. The extension addresses another weakness in attr_list : its attribute lists cannot contain characters that might be interpreted as some type of inline formatting, such as {attr=\"_value_\"} , due to the order of processing. Terminology Note An attribute list refers to the syntax {...} , generally consisting of style-related information. A fuller example of this is {.blue #someid attr=\"value\"} , where .blue indicates a CSS class name, #someid an element ID, and attr=\"value\" is an arbitrary attribute assignment. A list element refers to actual document content to be shown to the reader (rendered in HTML as <ol> or <ul> ). In Markdown, this is simply: * List item 1 * List item 2 Design Notes Kramdown\u2019s syntax provides a precedent for attribute lists appearing above blocks. la.attr_prefix avoids interfering with (or being interfered with by) existing parsing logic, using a two-step process: It finds and parses attribute lists early in Python-Markdown\u2019s \u201cblock processing\u201d phase (during which raw blocks of text are converted into tree elements), creating placeholder tree elements for them without, yet, attaching them to anything else. During the \u201ctree processing\u201d stage, it finally associates each set of attributes with the next (sibling) element in the tree, whatever it is.","title":"la.attr_prefix"},{"location":"extensions/captions/","text":"la.captions This extension lets you assign captions to document elements, and wraps them (as appropriate) in the HTML elements intended for this purpose: <figcaption> within <figure> , and/or <caption> within <table> . Once so structured, these figures, tables and captions can be styled with CSS and numbered using la.labels . To caption an element: Write the caption itself as an ordinary Markdown paragraph ( or block quote ) before the element you are captioning, with a paragraph break in between. Attach the -caption directive to the caption. (The attr_list extension will be loaded automatically for this purpose, but you can also use la.attr_prefix .) 1. Basic Example Here\u2019s how it works in simple cases: import lamarkdown as la la ( 'la.captions' ) la . css ( ''' figure { border: 1px solid gray; padding: 1em; } ''' ) Some ordinary document text. A diagram for your consideration. {-caption} ![ Important diagram ]( diagram1.svg ) Some more ordinary document text. < p > Some ordinary document text. </ p > < figure > < figcaption > A diagram for your consideration. </ figcaption > < img alt = \"Important diagram\" src = \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIKImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjwhLS0gR2VuZXJhdGVkIGJ5IGdyYXBodml6IHZlcnNpb24gOS4wLjAgKDApCi0tPgo8IS0tIFRpdGxlOiBEaWFncmFtIFBhZ2VzOiAxIC0tPgo8c3ZnIHdpZHRoPSIxMzRwdCIgaGVpZ2h0PSIxMDZwdCIKdmlld0JveD0iMC4wMCAwLjAwIDEzNC4yMSAxMDYuNDEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgo8ZyBpZD0iZ3JhcGgwIiBjbGFzcz0iZ3JhcGgiIHRyYW5zZm9ybT0ic2NhbGUoMSAxKSByb3RhdGUoMCkgdHJhbnNsYXRlKDQgMTAyLjQxKSI+Cjx0aXRsZT5EaWFncmFtPC90aXRsZT4KPHBvbHlnb24gZmlsbD0id2hpdGUiIHN0cm9rZT0ibm9uZSIgcG9pbnRzPSItNCw0IC00LC0xMDIuNDEgMTMwLjIxLC0xMDIuNDEgMTMwLjIxLDQgLTQsNCIvPgo8IS0tIEEgLS0+CjxnIGlkPSJub2RlMSIgY2xhc3M9Im5vZGUiPgo8dGl0bGU+QTwvdGl0bGU+Cjxwb2x5Z29uIGZpbGw9InBpbmsiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iNTQsLTk3LjkzIDAsLTk3LjkzIDAsLTYxLjkzIDU0LC02MS45MyA1NCwtOTcuOTMiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMjciIHk9Ii03NS4yNiIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIj5BPC90ZXh0Pgo8L2c+CjwhLS0gQiAtLT4KPGcgaWQ9Im5vZGUyIiBjbGFzcz0ibm9kZSI+Cjx0aXRsZT5CPC90aXRsZT4KPHBvbHlnb24gZmlsbD0ibGlnaHR5ZWxsb3ciIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iMTI2LjIxLC05OC40MSA3Mi4yMSwtOTguNDEgNzIuMjEsLTYyLjQxIDEyNi4yMSwtNjIuNDEgMTI2LjIxLC05OC40MSIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSI5OS4yMSIgeT0iLTc1LjczIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiPkI8L3RleHQ+CjwvZz4KPCEtLSBBJiM0NTsmZ3Q7QiAtLT4KPGcgaWQ9ImVkZ2UxIiBjbGFzcz0iZWRnZSI+Cjx0aXRsZT5BJiM0NTsmZ3Q7QjwvdGl0bGU+CjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIGQ9Ik01NC4zLC04MC4xMUM1Ni4zNiwtODAuMTMgNTguNDcsLTgwLjE0IDYwLjU5LC04MC4xNSIvPgo8cG9seWdvbiBmaWxsPSJibGFjayIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSI2MC4zMywtODMuNjUgNzAuMzYsLTgwLjIyIDYwLjM4LC03Ni42NSA2MC4zMywtODMuNjUiLz4KPC9nPgo8IS0tIEMgLS0+CjxnIGlkPSJub2RlMyIgY2xhc3M9Im5vZGUiPgo8dGl0bGU+QzwvdGl0bGU+Cjxwb2x5Z29uIGZpbGw9ImxpZ2h0Ymx1ZSIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSI5MC41OSwtMzYgMzYuNTksLTM2IDM2LjU5LDAgOTAuNTksMCA5MC41OSwtMzYiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iNjMuNTkiIHk9Ii0xMy4zMiIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIj5DPC90ZXh0Pgo8L2c+CjwhLS0gQiYjNDU7Jmd0O0MgLS0+CjxnIGlkPSJlZGdlMiIgY2xhc3M9ImVkZ2UiPgo8dGl0bGU+QiYjNDU7Jmd0O0M8L3RpdGxlPgo8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBkPSJNODguNzEsLTYyLjAyQzg1LjkxLC01Ny4xMSA4Mi44MiwtNTEuNjkgNzkuNzksLTQ2LjM4Ii8+Cjxwb2x5Z29uIGZpbGw9ImJsYWNrIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjgyLjg4LC00NC43NCA3NC44OCwtMzcuNzkgNzYuOCwtNDguMjEgODIuODgsLTQ0Ljc0Ii8+CjwvZz4KPCEtLSBDJiM0NTsmZ3Q7QSAtLT4KPGcgaWQ9ImVkZ2UzIiBjbGFzcz0iZWRnZSI+Cjx0aXRsZT5DJiM0NTsmZ3Q7QTwvdGl0bGU+CjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIGQ9Ik01Mi44MSwtMzYuMjVDNDkuOTMsLTQxLjEyIDQ2Ljc2LC00Ni41IDQzLjY0LC01MS43NyIvPgo8cG9seWdvbiBmaWxsPSJibGFjayIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSI0MC42NywtNDkuOTEgMzguNiwtNjAuMyA0Ni43LC01My40NyA0MC42NywtNDkuOTEiLz4KPC9nPgo8L2c+Cjwvc3ZnPg==\" > </ figure > < p > Some more ordinary document text. </ p > Design Notes An alternate (hypothetical) approach would be to write captions as values of the -caption directive itself, e.g.: {-caption=\"A diagram for your consideration.\"} ![ Important diagram ]( diagram1.svg ) <!-- Not actually how it works! --> This alternate approach would be unnecessarily limiting, because no Markdown processing occurs within attribute values. Thus, a caption would be limited to a single paragraph of text devoid of formatting, links, or any other semantic structure. There seems no advantage to this. Also, in the actual approach taken, captions must be written above (not below) their captioned elements, because: This is consistent with the traditional placement of table captions. Though figure captions traditionally appear underneath figures, this applies to formatted documents, where figures can be viewed as the pictures or diagrams they are intended to be. In Markdown, the code representing a figure usually won\u2019t have any meaning on its own, at a glance. We need a consistent rule. We can\u2019t permit captions to appear either above or below, without creating ambiguity or additional complexity. This only applies to the .md file itself. The HTML document can be styled so that captions appear anywhere you wish. 2. Tables When captioning a table, the HTML structure will use the <table> and <caption> elements. (The default styling may show the caption protruding outside the physical table boundary, but it\u2019s still logically part of the table.) import lamarkdown as la la ( 'la.captions' , 'tables' ) la . css ( ''' table { border: 1px solid red; } td, th { border: 1px solid blue; } ''' ) A table for your consideration. {-caption} Heading A | Heading B --------- | --------- One | Two Three | Four < table > < caption > A table for your consideration. </ caption > < thead > < tr > < th > Heading A </ th > < th > Heading B </ th > </ tr > </ thead > < tbody > < tr > < td > One </ td > < td > Two </ td > </ tr > < tr > < td > Three </ td > < td > Four </ td > </ tr > </ tbody > </ table > 3. Complex Captions If a caption requires more than one paragraph and/or other block elements, then: You can represent it using the Markdown \u201cblock quote\u201d syntax (prefixing lines with > ), but also You will need to use la.attr_prefix in order to attach the -caption directive above the block quote. (You can do this regardless, even in simpler cases, if you wish.) import lamarkdown as la la ( 'la.captions' , 'la.attr_prefix' ) la . css ( 'figure { border: 1px solid gray; ' ' padding: 1em; }' ) {-caption} > A diagram for your > consideration. > > It requires some complex explanation: > > * First, here's a list item. > * Second, there's another. ![ Important diagram ]( diagram1.svg ) < figure > < figcaption > < p > A diagram for your consideration. </ p > < p > It requires some complex explanation: </ p > < ul > < li > First, here's a list item. </ li > < li > Second, there's another. </ li > </ ul ></ figcaption > < img alt = \"Important diagram\" src = \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIKImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjwhLS0gR2VuZXJhdGVkIGJ5IGdyYXBodml6IHZlcnNpb24gOS4wLjAgKDApCi0tPgo8IS0tIFRpdGxlOiBEaWFncmFtIFBhZ2VzOiAxIC0tPgo8c3ZnIHdpZHRoPSIxMzRwdCIgaGVpZ2h0PSIxMDZwdCIKdmlld0JveD0iMC4wMCAwLjAwIDEzNC4yMSAxMDYuNDEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgo8ZyBpZD0iZ3JhcGgwIiBjbGFzcz0iZ3JhcGgiIHRyYW5zZm9ybT0ic2NhbGUoMSAxKSByb3RhdGUoMCkgdHJhbnNsYXRlKDQgMTAyLjQxKSI+Cjx0aXRsZT5EaWFncmFtPC90aXRsZT4KPHBvbHlnb24gZmlsbD0id2hpdGUiIHN0cm9rZT0ibm9uZSIgcG9pbnRzPSItNCw0IC00LC0xMDIuNDEgMTMwLjIxLC0xMDIuNDEgMTMwLjIxLDQgLTQsNCIvPgo8IS0tIEEgLS0+CjxnIGlkPSJub2RlMSIgY2xhc3M9Im5vZGUiPgo8dGl0bGU+QTwvdGl0bGU+Cjxwb2x5Z29uIGZpbGw9InBpbmsiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iNTQsLTk3LjkzIDAsLTk3LjkzIDAsLTYxLjkzIDU0LC02MS45MyA1NCwtOTcuOTMiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMjciIHk9Ii03NS4yNiIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIj5BPC90ZXh0Pgo8L2c+CjwhLS0gQiAtLT4KPGcgaWQ9Im5vZGUyIiBjbGFzcz0ibm9kZSI+Cjx0aXRsZT5CPC90aXRsZT4KPHBvbHlnb24gZmlsbD0ibGlnaHR5ZWxsb3ciIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iMTI2LjIxLC05OC40MSA3Mi4yMSwtOTguNDEgNzIuMjEsLTYyLjQxIDEyNi4yMSwtNjIuNDEgMTI2LjIxLC05OC40MSIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSI5OS4yMSIgeT0iLTc1LjczIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiPkI8L3RleHQ+CjwvZz4KPCEtLSBBJiM0NTsmZ3Q7QiAtLT4KPGcgaWQ9ImVkZ2UxIiBjbGFzcz0iZWRnZSI+Cjx0aXRsZT5BJiM0NTsmZ3Q7QjwvdGl0bGU+CjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIGQ9Ik01NC4zLC04MC4xMUM1Ni4zNiwtODAuMTMgNTguNDcsLTgwLjE0IDYwLjU5LC04MC4xNSIvPgo8cG9seWdvbiBmaWxsPSJibGFjayIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSI2MC4zMywtODMuNjUgNzAuMzYsLTgwLjIyIDYwLjM4LC03Ni42NSA2MC4zMywtODMuNjUiLz4KPC9nPgo8IS0tIEMgLS0+CjxnIGlkPSJub2RlMyIgY2xhc3M9Im5vZGUiPgo8dGl0bGU+QzwvdGl0bGU+Cjxwb2x5Z29uIGZpbGw9ImxpZ2h0Ymx1ZSIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSI5MC41OSwtMzYgMzYuNTksLTM2IDM2LjU5LDAgOTAuNTksMCA5MC41OSwtMzYiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iNjMuNTkiIHk9Ii0xMy4zMiIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIj5DPC90ZXh0Pgo8L2c+CjwhLS0gQiYjNDU7Jmd0O0MgLS0+CjxnIGlkPSJlZGdlMiIgY2xhc3M9ImVkZ2UiPgo8dGl0bGU+QiYjNDU7Jmd0O0M8L3RpdGxlPgo8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBkPSJNODguNzEsLTYyLjAyQzg1LjkxLC01Ny4xMSA4Mi44MiwtNTEuNjkgNzkuNzksLTQ2LjM4Ii8+Cjxwb2x5Z29uIGZpbGw9ImJsYWNrIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjgyLjg4LC00NC43NCA3NC44OCwtMzcuNzkgNzYuOCwtNDguMjEgODIuODgsLTQ0Ljc0Ii8+CjwvZz4KPCEtLSBDJiM0NTsmZ3Q7QSAtLT4KPGcgaWQ9ImVkZ2UzIiBjbGFzcz0iZWRnZSI+Cjx0aXRsZT5DJiM0NTsmZ3Q7QTwvdGl0bGU+CjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIGQ9Ik01Mi44MSwtMzYuMjVDNDkuOTMsLTQxLjEyIDQ2Ljc2LC00Ni41IDQzLjY0LC01MS43NyIvPgo8cG9seWdvbiBmaWxsPSJibGFjayIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSI0MC42NywtNDkuOTEgMzguNiwtNjAuMyA0Ni43LC01My40NyA0MC42NywtNDkuOTEiLz4KPC9nPgo8L2c+Cjwvc3ZnPg==\" > </ figure > 4. Options Option Description directives An object for retrieving directives from HTML tree elements. This should be an instance of lamarkdown.lib.directives.Directives , and the extension will reuse Lamarkdown\u2019s \u201ccurrent\u201d instance by default, if available. progress An object accepting error, warning and progress messages. This should be an instance of lamarkdown.lib.Progress , and the extension will reuse Lamarkdown\u2019s \u201ccurrent\u201d instance by default, if available. autowrap_listings False by default. If True , wrap all code listings ( <pre> elements containing a <code> element) in a <figure> element, even where no caption is provided. The theory is that listings are often less in need of a caption than ordinary figures or tables, but it may still be desirable to have them automatically numbered with the la.labels extension (which would otherwise ignore them). autowrap_maths False by default. If True , wrap all block-style MathML ( <math> ) elements in a <figure> element, even when no caption is provided. The same reasoning applies as for autowrap_listings .","title":"la.captions"},{"location":"extensions/captions/#lacaptions","text":"This extension lets you assign captions to document elements, and wraps them (as appropriate) in the HTML elements intended for this purpose: <figcaption> within <figure> , and/or <caption> within <table> . Once so structured, these figures, tables and captions can be styled with CSS and numbered using la.labels . To caption an element: Write the caption itself as an ordinary Markdown paragraph ( or block quote ) before the element you are captioning, with a paragraph break in between. Attach the -caption directive to the caption. (The attr_list extension will be loaded automatically for this purpose, but you can also use la.attr_prefix .)","title":"la.captions"},{"location":"extensions/captions/#1-basic-example","text":"Here\u2019s how it works in simple cases: import lamarkdown as la la ( 'la.captions' ) la . css ( ''' figure { border: 1px solid gray; padding: 1em; } ''' ) Some ordinary document text. A diagram for your consideration. {-caption} ![ Important diagram ]( diagram1.svg ) Some more ordinary document text. < p > Some ordinary document text. </ p > < figure > < figcaption > A diagram for your consideration. </ figcaption > < img alt = \"Important diagram\" src = \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIKImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjwhLS0gR2VuZXJhdGVkIGJ5IGdyYXBodml6IHZlcnNpb24gOS4wLjAgKDApCi0tPgo8IS0tIFRpdGxlOiBEaWFncmFtIFBhZ2VzOiAxIC0tPgo8c3ZnIHdpZHRoPSIxMzRwdCIgaGVpZ2h0PSIxMDZwdCIKdmlld0JveD0iMC4wMCAwLjAwIDEzNC4yMSAxMDYuNDEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgo8ZyBpZD0iZ3JhcGgwIiBjbGFzcz0iZ3JhcGgiIHRyYW5zZm9ybT0ic2NhbGUoMSAxKSByb3RhdGUoMCkgdHJhbnNsYXRlKDQgMTAyLjQxKSI+Cjx0aXRsZT5EaWFncmFtPC90aXRsZT4KPHBvbHlnb24gZmlsbD0id2hpdGUiIHN0cm9rZT0ibm9uZSIgcG9pbnRzPSItNCw0IC00LC0xMDIuNDEgMTMwLjIxLC0xMDIuNDEgMTMwLjIxLDQgLTQsNCIvPgo8IS0tIEEgLS0+CjxnIGlkPSJub2RlMSIgY2xhc3M9Im5vZGUiPgo8dGl0bGU+QTwvdGl0bGU+Cjxwb2x5Z29uIGZpbGw9InBpbmsiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iNTQsLTk3LjkzIDAsLTk3LjkzIDAsLTYxLjkzIDU0LC02MS45MyA1NCwtOTcuOTMiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMjciIHk9Ii03NS4yNiIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIj5BPC90ZXh0Pgo8L2c+CjwhLS0gQiAtLT4KPGcgaWQ9Im5vZGUyIiBjbGFzcz0ibm9kZSI+Cjx0aXRsZT5CPC90aXRsZT4KPHBvbHlnb24gZmlsbD0ibGlnaHR5ZWxsb3ciIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iMTI2LjIxLC05OC40MSA3Mi4yMSwtOTguNDEgNzIuMjEsLTYyLjQxIDEyNi4yMSwtNjIuNDEgMTI2LjIxLC05OC40MSIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSI5OS4yMSIgeT0iLTc1LjczIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiPkI8L3RleHQ+CjwvZz4KPCEtLSBBJiM0NTsmZ3Q7QiAtLT4KPGcgaWQ9ImVkZ2UxIiBjbGFzcz0iZWRnZSI+Cjx0aXRsZT5BJiM0NTsmZ3Q7QjwvdGl0bGU+CjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIGQ9Ik01NC4zLC04MC4xMUM1Ni4zNiwtODAuMTMgNTguNDcsLTgwLjE0IDYwLjU5LC04MC4xNSIvPgo8cG9seWdvbiBmaWxsPSJibGFjayIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSI2MC4zMywtODMuNjUgNzAuMzYsLTgwLjIyIDYwLjM4LC03Ni42NSA2MC4zMywtODMuNjUiLz4KPC9nPgo8IS0tIEMgLS0+CjxnIGlkPSJub2RlMyIgY2xhc3M9Im5vZGUiPgo8dGl0bGU+QzwvdGl0bGU+Cjxwb2x5Z29uIGZpbGw9ImxpZ2h0Ymx1ZSIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSI5MC41OSwtMzYgMzYuNTksLTM2IDM2LjU5LDAgOTAuNTksMCA5MC41OSwtMzYiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iNjMuNTkiIHk9Ii0xMy4zMiIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIj5DPC90ZXh0Pgo8L2c+CjwhLS0gQiYjNDU7Jmd0O0MgLS0+CjxnIGlkPSJlZGdlMiIgY2xhc3M9ImVkZ2UiPgo8dGl0bGU+QiYjNDU7Jmd0O0M8L3RpdGxlPgo8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBkPSJNODguNzEsLTYyLjAyQzg1LjkxLC01Ny4xMSA4Mi44MiwtNTEuNjkgNzkuNzksLTQ2LjM4Ii8+Cjxwb2x5Z29uIGZpbGw9ImJsYWNrIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjgyLjg4LC00NC43NCA3NC44OCwtMzcuNzkgNzYuOCwtNDguMjEgODIuODgsLTQ0Ljc0Ii8+CjwvZz4KPCEtLSBDJiM0NTsmZ3Q7QSAtLT4KPGcgaWQ9ImVkZ2UzIiBjbGFzcz0iZWRnZSI+Cjx0aXRsZT5DJiM0NTsmZ3Q7QTwvdGl0bGU+CjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIGQ9Ik01Mi44MSwtMzYuMjVDNDkuOTMsLTQxLjEyIDQ2Ljc2LC00Ni41IDQzLjY0LC01MS43NyIvPgo8cG9seWdvbiBmaWxsPSJibGFjayIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSI0MC42NywtNDkuOTEgMzguNiwtNjAuMyA0Ni43LC01My40NyA0MC42NywtNDkuOTEiLz4KPC9nPgo8L2c+Cjwvc3ZnPg==\" > </ figure > < p > Some more ordinary document text. </ p > Design Notes An alternate (hypothetical) approach would be to write captions as values of the -caption directive itself, e.g.: {-caption=\"A diagram for your consideration.\"} ![ Important diagram ]( diagram1.svg ) <!-- Not actually how it works! --> This alternate approach would be unnecessarily limiting, because no Markdown processing occurs within attribute values. Thus, a caption would be limited to a single paragraph of text devoid of formatting, links, or any other semantic structure. There seems no advantage to this. Also, in the actual approach taken, captions must be written above (not below) their captioned elements, because: This is consistent with the traditional placement of table captions. Though figure captions traditionally appear underneath figures, this applies to formatted documents, where figures can be viewed as the pictures or diagrams they are intended to be. In Markdown, the code representing a figure usually won\u2019t have any meaning on its own, at a glance. We need a consistent rule. We can\u2019t permit captions to appear either above or below, without creating ambiguity or additional complexity. This only applies to the .md file itself. The HTML document can be styled so that captions appear anywhere you wish.","title":"1. Basic Example"},{"location":"extensions/captions/#2-tables","text":"When captioning a table, the HTML structure will use the <table> and <caption> elements. (The default styling may show the caption protruding outside the physical table boundary, but it\u2019s still logically part of the table.) import lamarkdown as la la ( 'la.captions' , 'tables' ) la . css ( ''' table { border: 1px solid red; } td, th { border: 1px solid blue; } ''' ) A table for your consideration. {-caption} Heading A | Heading B --------- | --------- One | Two Three | Four < table > < caption > A table for your consideration. </ caption > < thead > < tr > < th > Heading A </ th > < th > Heading B </ th > </ tr > </ thead > < tbody > < tr > < td > One </ td > < td > Two </ td > </ tr > < tr > < td > Three </ td > < td > Four </ td > </ tr > </ tbody > </ table >","title":"2. Tables"},{"location":"extensions/captions/#complex","text":"If a caption requires more than one paragraph and/or other block elements, then: You can represent it using the Markdown \u201cblock quote\u201d syntax (prefixing lines with > ), but also You will need to use la.attr_prefix in order to attach the -caption directive above the block quote. (You can do this regardless, even in simpler cases, if you wish.) import lamarkdown as la la ( 'la.captions' , 'la.attr_prefix' ) la . css ( 'figure { border: 1px solid gray; ' ' padding: 1em; }' ) {-caption} > A diagram for your > consideration. > > It requires some complex explanation: > > * First, here's a list item. > * Second, there's another. ![ Important diagram ]( diagram1.svg ) < figure > < figcaption > < p > A diagram for your consideration. </ p > < p > It requires some complex explanation: </ p > < ul > < li > First, here's a list item. </ li > < li > Second, there's another. </ li > </ ul ></ figcaption > < img alt = \"Important diagram\" src = \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIKImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjwhLS0gR2VuZXJhdGVkIGJ5IGdyYXBodml6IHZlcnNpb24gOS4wLjAgKDApCi0tPgo8IS0tIFRpdGxlOiBEaWFncmFtIFBhZ2VzOiAxIC0tPgo8c3ZnIHdpZHRoPSIxMzRwdCIgaGVpZ2h0PSIxMDZwdCIKdmlld0JveD0iMC4wMCAwLjAwIDEzNC4yMSAxMDYuNDEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgo8ZyBpZD0iZ3JhcGgwIiBjbGFzcz0iZ3JhcGgiIHRyYW5zZm9ybT0ic2NhbGUoMSAxKSByb3RhdGUoMCkgdHJhbnNsYXRlKDQgMTAyLjQxKSI+Cjx0aXRsZT5EaWFncmFtPC90aXRsZT4KPHBvbHlnb24gZmlsbD0id2hpdGUiIHN0cm9rZT0ibm9uZSIgcG9pbnRzPSItNCw0IC00LC0xMDIuNDEgMTMwLjIxLC0xMDIuNDEgMTMwLjIxLDQgLTQsNCIvPgo8IS0tIEEgLS0+CjxnIGlkPSJub2RlMSIgY2xhc3M9Im5vZGUiPgo8dGl0bGU+QTwvdGl0bGU+Cjxwb2x5Z29uIGZpbGw9InBpbmsiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iNTQsLTk3LjkzIDAsLTk3LjkzIDAsLTYxLjkzIDU0LC02MS45MyA1NCwtOTcuOTMiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMjciIHk9Ii03NS4yNiIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIj5BPC90ZXh0Pgo8L2c+CjwhLS0gQiAtLT4KPGcgaWQ9Im5vZGUyIiBjbGFzcz0ibm9kZSI+Cjx0aXRsZT5CPC90aXRsZT4KPHBvbHlnb24gZmlsbD0ibGlnaHR5ZWxsb3ciIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iMTI2LjIxLC05OC40MSA3Mi4yMSwtOTguNDEgNzIuMjEsLTYyLjQxIDEyNi4yMSwtNjIuNDEgMTI2LjIxLC05OC40MSIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSI5OS4yMSIgeT0iLTc1LjczIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiPkI8L3RleHQ+CjwvZz4KPCEtLSBBJiM0NTsmZ3Q7QiAtLT4KPGcgaWQ9ImVkZ2UxIiBjbGFzcz0iZWRnZSI+Cjx0aXRsZT5BJiM0NTsmZ3Q7QjwvdGl0bGU+CjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIGQ9Ik01NC4zLC04MC4xMUM1Ni4zNiwtODAuMTMgNTguNDcsLTgwLjE0IDYwLjU5LC04MC4xNSIvPgo8cG9seWdvbiBmaWxsPSJibGFjayIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSI2MC4zMywtODMuNjUgNzAuMzYsLTgwLjIyIDYwLjM4LC03Ni42NSA2MC4zMywtODMuNjUiLz4KPC9nPgo8IS0tIEMgLS0+CjxnIGlkPSJub2RlMyIgY2xhc3M9Im5vZGUiPgo8dGl0bGU+QzwvdGl0bGU+Cjxwb2x5Z29uIGZpbGw9ImxpZ2h0Ymx1ZSIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSI5MC41OSwtMzYgMzYuNTksLTM2IDM2LjU5LDAgOTAuNTksMCA5MC41OSwtMzYiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iNjMuNTkiIHk9Ii0xMy4zMiIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIj5DPC90ZXh0Pgo8L2c+CjwhLS0gQiYjNDU7Jmd0O0MgLS0+CjxnIGlkPSJlZGdlMiIgY2xhc3M9ImVkZ2UiPgo8dGl0bGU+QiYjNDU7Jmd0O0M8L3RpdGxlPgo8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBkPSJNODguNzEsLTYyLjAyQzg1LjkxLC01Ny4xMSA4Mi44MiwtNTEuNjkgNzkuNzksLTQ2LjM4Ii8+Cjxwb2x5Z29uIGZpbGw9ImJsYWNrIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjgyLjg4LC00NC43NCA3NC44OCwtMzcuNzkgNzYuOCwtNDguMjEgODIuODgsLTQ0Ljc0Ii8+CjwvZz4KPCEtLSBDJiM0NTsmZ3Q7QSAtLT4KPGcgaWQ9ImVkZ2UzIiBjbGFzcz0iZWRnZSI+Cjx0aXRsZT5DJiM0NTsmZ3Q7QTwvdGl0bGU+CjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIGQ9Ik01Mi44MSwtMzYuMjVDNDkuOTMsLTQxLjEyIDQ2Ljc2LC00Ni41IDQzLjY0LC01MS43NyIvPgo8cG9seWdvbiBmaWxsPSJibGFjayIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSI0MC42NywtNDkuOTEgMzguNiwtNjAuMyA0Ni43LC01My40NyA0MC42NywtNDkuOTEiLz4KPC9nPgo8L2c+Cjwvc3ZnPg==\" > </ figure >","title":"3. Complex Captions"},{"location":"extensions/captions/#4-options","text":"Option Description directives An object for retrieving directives from HTML tree elements. This should be an instance of lamarkdown.lib.directives.Directives , and the extension will reuse Lamarkdown\u2019s \u201ccurrent\u201d instance by default, if available. progress An object accepting error, warning and progress messages. This should be an instance of lamarkdown.lib.Progress , and the extension will reuse Lamarkdown\u2019s \u201ccurrent\u201d instance by default, if available. autowrap_listings False by default. If True , wrap all code listings ( <pre> elements containing a <code> element) in a <figure> element, even where no caption is provided. The theory is that listings are often less in need of a caption than ordinary figures or tables, but it may still be desirable to have them automatically numbered with the la.labels extension (which would otherwise ignore them). autowrap_maths False by default. If True , wrap all block-style MathML ( <math> ) elements in a <figure> element, even when no caption is provided. The same reasoning applies as for autowrap_listings .","title":"4. Options"},{"location":"extensions/cite/","text":"la.cite This extension lets you embed citations (e.g., [@author1990] or [see @author1; @author2; @{abc;def!}] ), which are collected to generate a bibliography, based on an external database file. (This citation format was inspired by Pandoc\u2019s citation syntax , though it currently has less semantic structure. The extension uses the Pybtex library to read .bib files and construct a bibliography.) import lamarkdown as la la ( 'la.cite' , file = 'references.bib' ) la . css ( '#la-bibliography { display: table }' '#la-bibliography dt { display: table-cell; }' ) # references.bib @article { refA , author = \"An Author\" , title = \"A Title\" , journal = \"The Journal\" , year = \"1990\" } ## Referencing Example Here's a citation [@refA]. ### References ///References Go Here/// 1. Citation Syntax A citation consists of [...] containing one or more citation keys of the form @xyz or @{xyz} , at least one of which matches an entry in the reference database. There can be free-form text within the brackets, before, after and in-between citation keys. In practice, most citations probably contain just one citation key (e.g., [@author1990] ), or a comma-separated list of them (e.g., [@abc, @def, @ghi] ). Without braces, a citation key can consider of letters, digits and _ , with selected other characters available as single-char internal punctuation (e.g., a key can contain . and/or - , but cannot start or end with them, nor contain .. or -- ). If necessary, a citation key with braces can contain any non-brace characters, as well as singly-nested, matching pairs of braces. Design Notes la.cite takes care to check this syntax does not conflict with existing link or image syntax (e.g., [...](...) ). In permitting (nearly) arbitrary special characters within braces, la.cite does not permit multiply-nested braces, as this would add implementation complexity for marginal benefit. The BibTeX format describes permitted citation key characters within .bib files. However, Pandoc may be the better reference point, being another Markdown implementation. 2. Citation and Reference Formats la.cite \u2019s formatting capabilites are a work-in-progress. It currently has quite limited capabilities regarding the way citations and references are displayed in the output HTML. It is a future ambition to integrate an implementation of CiteProc into la.cite . 3. Options Option Description encoding The encoding of reference file(s). By default, this is utf-8-sig (which represents UTF-8, but expects and skips over any \u201cbyte order mark\u201d). file A filename, or a list of filenames, of BibTeX-formatted reference list(s). By default, la.cite looks for a file called references.bib . See also references . format It\u2019s currently recommended to just leave this at the default, bibtex . hyperlinks One of both (the default), forward , back or none , indicating whether to create hyperlinks from citation to reference (forward/both) and from reference back to citation(s) (back/both). ignore_missing_file If True (the default), missing reference files are ignored, rather than reported as errors. live_update_deps A set-like object into which the extension records all external BibTeX files, including those supplied via the file option, and also any supplied via document metadata (using the meta extension). By default, if available, the extension will use Lamarkdown\u2019s \u201ccurrent\u201d set of such dependencies. This has no effect on the output produced, but assists Lamarkdown in understanding when it should recompile the .md document. place_marker The string marking where bibliography entries will be placed. By default, this is ///References Go Here/// . If this is missing, the bibliography will simply be appended to the end of the document. progress An object accepting error, warning and progress messages. This should be an instance of lamarkdown.lib.Progress , and the extension will reuse Lamarkdown\u2019s \u201ccurrent\u201d instance by default, if available. references Either None (the default), or a string directly containing BibTeX-formatted references (or None). See also file . style One of alpha , plain , unsrt or unsrtalpha , indicating how to format citations and references.","title":"la.cite"},{"location":"extensions/cite/#lacite","text":"This extension lets you embed citations (e.g., [@author1990] or [see @author1; @author2; @{abc;def!}] ), which are collected to generate a bibliography, based on an external database file. (This citation format was inspired by Pandoc\u2019s citation syntax , though it currently has less semantic structure. The extension uses the Pybtex library to read .bib files and construct a bibliography.) import lamarkdown as la la ( 'la.cite' , file = 'references.bib' ) la . css ( '#la-bibliography { display: table }' '#la-bibliography dt { display: table-cell; }' ) # references.bib @article { refA , author = \"An Author\" , title = \"A Title\" , journal = \"The Journal\" , year = \"1990\" } ## Referencing Example Here's a citation [@refA]. ### References ///References Go Here///","title":"la.cite"},{"location":"extensions/cite/#1-citation-syntax","text":"A citation consists of [...] containing one or more citation keys of the form @xyz or @{xyz} , at least one of which matches an entry in the reference database. There can be free-form text within the brackets, before, after and in-between citation keys. In practice, most citations probably contain just one citation key (e.g., [@author1990] ), or a comma-separated list of them (e.g., [@abc, @def, @ghi] ). Without braces, a citation key can consider of letters, digits and _ , with selected other characters available as single-char internal punctuation (e.g., a key can contain . and/or - , but cannot start or end with them, nor contain .. or -- ). If necessary, a citation key with braces can contain any non-brace characters, as well as singly-nested, matching pairs of braces. Design Notes la.cite takes care to check this syntax does not conflict with existing link or image syntax (e.g., [...](...) ). In permitting (nearly) arbitrary special characters within braces, la.cite does not permit multiply-nested braces, as this would add implementation complexity for marginal benefit. The BibTeX format describes permitted citation key characters within .bib files. However, Pandoc may be the better reference point, being another Markdown implementation.","title":"1. Citation Syntax"},{"location":"extensions/cite/#2-citation-and-reference-formats","text":"la.cite \u2019s formatting capabilites are a work-in-progress. It currently has quite limited capabilities regarding the way citations and references are displayed in the output HTML. It is a future ambition to integrate an implementation of CiteProc into la.cite .","title":"2. Citation and Reference Formats"},{"location":"extensions/cite/#3-options","text":"Option Description encoding The encoding of reference file(s). By default, this is utf-8-sig (which represents UTF-8, but expects and skips over any \u201cbyte order mark\u201d). file A filename, or a list of filenames, of BibTeX-formatted reference list(s). By default, la.cite looks for a file called references.bib . See also references . format It\u2019s currently recommended to just leave this at the default, bibtex . hyperlinks One of both (the default), forward , back or none , indicating whether to create hyperlinks from citation to reference (forward/both) and from reference back to citation(s) (back/both). ignore_missing_file If True (the default), missing reference files are ignored, rather than reported as errors. live_update_deps A set-like object into which the extension records all external BibTeX files, including those supplied via the file option, and also any supplied via document metadata (using the meta extension). By default, if available, the extension will use Lamarkdown\u2019s \u201ccurrent\u201d set of such dependencies. This has no effect on the output produced, but assists Lamarkdown in understanding when it should recompile the .md document. place_marker The string marking where bibliography entries will be placed. By default, this is ///References Go Here/// . If this is missing, the bibliography will simply be appended to the end of the document. progress An object accepting error, warning and progress messages. This should be an instance of lamarkdown.lib.Progress , and the extension will reuse Lamarkdown\u2019s \u201ccurrent\u201d instance by default, if available. references Either None (the default), or a string directly containing BibTeX-formatted references (or None). See also file . style One of alpha , plain , unsrt or unsrtalpha , indicating how to format citations and references.","title":"3. Options"},{"location":"extensions/eval/","text":"la.eval This extension lets authors insert computed values into documents, with inline expressions of the form $`...` (or $``...`` , etc). Design Notes This syntax was chosen for its resemblance to Markdown\u2019s literal code syntax ( `...` ). The advantages are that: The contents are easier to distinguish from formatted Markdown, and Markdown syntax highlighters should recognise it as such. Meanwhile, $ is commonly used in various languages as a prefix indicating a placeholder value. 1. Placeholders and Replacement Values Users can supply a dict of replacement values via the replace config option. The extension will look up the text occurring in $`...` in the dict. If that text is a key in the dict, the whole expression is replaced by the corresponding dict value. By default (with no configuration), the replacement dict contains keys date and datetime , allowing authors to write $`date` or $`datetime` to insert the current date, or date and time, into the document. For example, using the defaults: # My Document Last updated: $ `date` ... Specifying custom replacements: # md_build.py import lamarkdown as la la ( 'la.eval' , replace = { publisher : \"Example Inc.\" , licence : \"CC-BY-4.0\" } ) # My Document Published by $ `publisher` , licenced $ `licence` . 2. Expression Evaluation The extension can also execute the contents of $`...` as raw Python code. This will only be done if (a) the allow_code config option is True (by default it is False ), and (b) if there is no matching key in the replacement dict. When executing code this way, the result will be converted to a string, which will replace the original expression in the output document. For instance, writing $`1+1` will insert 2 into the document. If there is an error in the expression, the error message will instead appear in the document. This approach has security implications . The allow_code option should not be enabled if there is any question about whether to trust the author of the Markdown file. 3. Options Option Description allow_exec True if you wish to allow expression evaluation (not just placeholder substitution), or False if you are concerned about the possibility of untrusted code. By default, this flag is equal to the global Lamarkdown allow_exec flag , which is itself False by default. env A dictionary containing the environment in which to evaluate expressions, if allow_exec == True . This helps you control which objects can be accessed from a Python expression inside $`...` (though this isn\u2019t in any way a security feature). progress An object accepting error, warning and progress messages. This should be an instance of lamarkdown.lib.Progress , and the extension will reuse Lamarkdown\u2019s \u201ccurrent\u201d instance by default, if available. replace A dictionary for looking up replacement values for labels encountered in $`...` . By default, this contains just the keys date and datetime , which map to the ISO-formatted representations of the current date, and current date and time.","title":"la.eval"},{"location":"extensions/eval/#laeval","text":"This extension lets authors insert computed values into documents, with inline expressions of the form $`...` (or $``...`` , etc). Design Notes This syntax was chosen for its resemblance to Markdown\u2019s literal code syntax ( `...` ). The advantages are that: The contents are easier to distinguish from formatted Markdown, and Markdown syntax highlighters should recognise it as such. Meanwhile, $ is commonly used in various languages as a prefix indicating a placeholder value.","title":"la.eval"},{"location":"extensions/eval/#1-placeholders-and-replacement-values","text":"Users can supply a dict of replacement values via the replace config option. The extension will look up the text occurring in $`...` in the dict. If that text is a key in the dict, the whole expression is replaced by the corresponding dict value. By default (with no configuration), the replacement dict contains keys date and datetime , allowing authors to write $`date` or $`datetime` to insert the current date, or date and time, into the document. For example, using the defaults: # My Document Last updated: $ `date` ... Specifying custom replacements: # md_build.py import lamarkdown as la la ( 'la.eval' , replace = { publisher : \"Example Inc.\" , licence : \"CC-BY-4.0\" } ) # My Document Published by $ `publisher` , licenced $ `licence` .","title":"1. Placeholders and Replacement Values"},{"location":"extensions/eval/#2-expression-evaluation","text":"The extension can also execute the contents of $`...` as raw Python code. This will only be done if (a) the allow_code config option is True (by default it is False ), and (b) if there is no matching key in the replacement dict. When executing code this way, the result will be converted to a string, which will replace the original expression in the output document. For instance, writing $`1+1` will insert 2 into the document. If there is an error in the expression, the error message will instead appear in the document. This approach has security implications . The allow_code option should not be enabled if there is any question about whether to trust the author of the Markdown file.","title":"2. Expression Evaluation"},{"location":"extensions/eval/#3-options","text":"Option Description allow_exec True if you wish to allow expression evaluation (not just placeholder substitution), or False if you are concerned about the possibility of untrusted code. By default, this flag is equal to the global Lamarkdown allow_exec flag , which is itself False by default. env A dictionary containing the environment in which to evaluate expressions, if allow_exec == True . This helps you control which objects can be accessed from a Python expression inside $`...` (though this isn\u2019t in any way a security feature). progress An object accepting error, warning and progress messages. This should be an instance of lamarkdown.lib.Progress , and the extension will reuse Lamarkdown\u2019s \u201ccurrent\u201d instance by default, if available. replace A dictionary for looking up replacement values for labels encountered in $`...` . By default, this contains just the keys date and datetime , which map to the ISO-formatted representations of the current date, and current date and time.","title":"3. Options"},{"location":"extensions/labels/","text":"la.labels This extension assigns counter-based (or fixed) labels to headings, lists, figures and tables, and lets you use those labels in links to labelled elements. You can specify where and how labels should appear by: Adding the -label=... directive to headings, lists, figures and tables; or Specifying the labels configuration option . In both cases, you provide a label template . Note Remember that, while the following examples all use the -label directive, you can just as easily write templates using the labels configuration option. In the latter case, you may not need to modify the .md file at all in order to produce the labelling systems you want. 1. Label Templates A label template has several parts. 1.1. Counter Types A counter type is a system for counting integers. Given -label=\"1\" , the 1 is a counter type representing base-10 Arabic numerals. You can also provide A or a for upper/lower-case alphabetic numbering, I or i for upper/lower-case Roman numerals, or one of various longer-form names corresponding to CSS counter styles (e.g., simp-chinese-informal , lower-greek , lower-hexadecimal , etc.). ## Heading {-label=\"i \"} ## Heading {-label=\"simp-chinese-formal \"} 1. List item 2. List item Design Notes The available counter types are essentially the same as the values supported by the list-style-type CSS property , except for : Bullet-points like disc , circle , square , disclosure-open and disclosure-closed (which would simply duplicate literal Unicode characters); Global CSS values like inherit , initial , etc.; The value none ; Custom counter styles. The use of CSS belies some internal complexity. Lists are numbered by generating CSS code that itself produces the labels (because this seems the conventional approach to HTML/CSS lists). However, headings (and figures and tables) are labelled at compile time , the labels becoming part of the HTML document content. This is partly because the toc extension will read heading text (at compile time, of course), and reproduce it inside the table-of-contents, and we\u2019d ideally like the table-of-contents to contain the same heading labels that the headings themselves do. To support compile-time labelling, la.labels must implement much of the same counter logic as browsers do to support CSS\u2019s @counter-style construct . A future version of Lamarkdown may: Provide a configuration option to determine which implementation approach to use for which type of element; and/or Provide a way to define custom counter types, similar to @counter-style . 1.2. Literals Literal strings can appear as the prefix and suffix of a label. In -label=\"(1) \" , the ( is a prefix, and ) is a suffix. Literals may contain any number of characters, including zero: e.g.: {-label=\"@@@ A @@@\"} 1. List item 2. List item 3. List item Literals can consist of: Spaces and all printable symbols other than ASCII digits, letters, quotation marks, , , - and * . - , when not between alphanumeric characters (where it is considered part of a counter type). * , when not the final character following , (where it has a special meaning, explained below ). Characters within an additional pair of quotation marks. There will already be a pair of quotation marks around the entire template (whether -label='...' or label=\"...\" ), so the inner quotation marks must be different. For instance: {-label=\"'Table' 1.\"} Column A | Column B -------- | -------- One | Two Three | Four Column C | Column D -------- | -------- Five | Six Seven | Eight Quotation marks, when doubled-up within other quotation marks; e.g., -label=\"''''1''''\" produces a base-10 arabic number inside a single set of quotation marks: '1' , '2' , etc. Note: the attribute syntax (the general form attr=\"value\" ) has its own separate way of escaping characters with \\ , but this is invisible to the template syntax, so cannot be used to designate literal characters. A label may consist of just a literal string, with no counter type, which can be useful in unordered lists: {-label=\"{-\u29bf-} \"} * List item * List item * List item 1.3. Hierarchical Labels A parent indicator (if present) is used to make hierarchical labels. It acts as a placeholder for a higher-level label, which then forms part of the lower-level label, preceeding the lower-level counter. (The higher-level label\u2019s own prefix and suffix are removed.) A template with a parent indicator has a form similar to -label=\"(L.1) \" , where L is the parent indicator, and . is a separator literal (which can be any valid literal). L specifically refers to the label of the next higher list , if one exists. For instance: {-label=\"L.1. \"} 1. Item 2. Item {-label=\"[L.A] \"} 1. Item 2. Item {-label=\"_L_i_ \"} 1. Item 2. Item 3. Item 3. Item In the first label template above, the L. part will be ignored, because there is no higher list level. Similarly, the parent indicator H refers to the label of the next higher heading (if one exists): {-label=\"H.1. \"} ## Heading ## Heading {-label=\"[H.A] \"} ### Heading ### Heading {-label=\"_H_i_ \"} #### Heading #### Heading ### Heading ## Heading Meanwhile, X refers to the next label label of any kind. For example, here are some <h3> headings, within an <ol> list, underneath another <h2> heading, where the labels are arranged hierarchically: {-label=\"1. \"} ## Heading ## Heading {-label=\"[X.A] \"} 1. List item 2. List item {-label=\"_X_i_ \"} ### Heading ### Heading 1.4. Inner Templates An inner template is the part of a template after the first (non-quoted) , . A full label template consists of a , -separated sequence of components (each of which is as described above), optionally ending in ,* . Inner label templates let you set up several levels of labelling in one place. They apply to nested elements of the same type. For instance, -label=\"1. ,(a) ,(i) \" assigns labels 1. , 2. , etc. to the current level, (a) , (b) to singly-nested elements, and (i) , (ii) to doubly-nested elements (all of the same type). {-label=\"1. ,(a), (i) \"} 1. List item 1. List item 1. List item 2. List item 2. List item 2. List item {-label=\"\u2660 ,\u2665, \u2663, \u2666 \"} * List item * List item * List item * List item * List item * List item When ,* occurs after the final template component, it applies that template to all more-deeply nested elements indefinitely (until otherwise overridden). Together with parent indicators, this lets you produce a typical multilevel decimal numbering system with little overhead: {-label=\"H.1. ,*\"} ## Heading ### Heading #### Heading #### Heading ### Heading ## Heading 2. Cross References Once elements are labelled, you can create links to them (or parts of them) that include those labels in the link text. Specifically, you must: Assign an ID to the target of a link, e.g., by writing {#myid} before or after it. The ID does not need to be on precisely the element that actually has the label; it may also be on any element inside it. Create a link to that ID, where the link text contains ## . For instance: Some references to headings [ ## ]( #secX ) and [ ## ]( #secY ), and to [ list item ## ]( #itemU ) and [ list item ## ]( #itemV ). {-label=\"1. \"} ## Heading {#secX} ## Heading {#secY} {-label=\"(a) \"} 1. List item {#itemU} 2. List item {#itemV} You can be more specific about what kind of label you want to refer to, by appending a parent indicator to the ## ; e.g., ##H or ##L . You can also have multiple such placeholders for a single link. A reference to [ list item ##L in section ##H ]( #item ). {-label=\"1. \"} ## Heading ## Heading {-label=\"(a) \"} 1. List item 2. List item {#item} Design Notes The use of ## has the advantage that: It is concise, without being too likely to require routine escaping (as a single # may); It appears to reflect a number; It also seems visually-related to the element IDs syntax ( #myid ), while not being exactly the same; and Since it only applies inside link text, it does not conflict with heading syntax. One might compare the approach to LaTeX, which uses \\label and \\ref : A reference to Section \\ref { xyz } . \\section { First } ... \\section { Second } \\label { xyz } ... Markdown and HTML have element IDs in place of \\label . They do not have an exact equivalent of \\ref (which just grabs a label). But rather than trying to recreate \\ref exactly, we accept the preeminence of hyperlinks in Markdown and HTML, and work within them. One theoretical weakness of the la.labels approach is that you cannot make a label reference outside of a hyperlink. There seems little practical drawback to this, though. la.labels does not replace or directly alter the Markdown link-parsing logic, but rather looks for the text inside <a> (anchor) elements once they\u2019ve already been parsed. 3. Suppressing Labels: -no-label The -no-label directive will suppress a label in places where one would otherwise occur. The counter will be paused, and carry on at the next applicable element. ## Heading {-label=\"(i) \"} ## Heading {-no-label} ## Heading {-label=\"(i) \"} 1. List item 2. List item {-no-label} 3. List item 4. Changing Labels The label format may be changed part-way through a sequence of elements, simply by assigning a new -label template to one of the elements. For instance: ## Heading {-label=\"(i) \"} ## Heading ## Heading {-label=\"[A] \"} ## Heading {-label=\"(i) \"} 1. List item 2. List item 3. List item {-label=\"[A] \"} 4. List item 5. Options The labels option is the one key option for influencing document-wide labelling conventions. The remainder of the options below concern the technical implementation details. Option Description css_fn A function taking a single string parameter, which the extension will call to deliver CSS code, under the assumption that it will be applied to the output document. The extension needs this capability in order to implement CSS-based labels, particularly for ordered/unordered lists. By default, and if it\u2019s available, this will be lamarkdown.css() . If css_fn is None , or if it\u2019s left unspecified and lamarkdown.css() is not available (because the extension is being run externally), then CSS-based labels will be disabled. In this case, the extension will fall back to hard-coding list labels in the HTML document. This may be visually indistinguishable, though not necessarily semantically equivalent. css_rendering A set containing element types that will receive CSS-based label rendering, if it\u2019s available, rather than hard-coded labels. It\u2019s not currently recommended to change this, because the underlying implementation only currently supports CSS-based rendering for list labels. directives An object for retrieving directives from HTML tree elements. This should be an instance of lamarkdown.lib.directives.Directives , and the extension will reuse Lamarkdown\u2019s \u201ccurrent\u201d instance by default, if available. label_processors A list of LabelProcessor objects responsible for orchestrating the labelling of different kinds of HTML elements. It\u2019s not currently recommended to change this. labels A dictionary specifying label templates to use in the absence of -label directives. The dictionary keys are h (for headings), \u201c h n \u201d (for level- n headings specifically), ol (for ordered lists), ul (for unordered lists), figure and table . The dictionary values are label templates . Just as for the -label directive, these templates can also include parent indicators and inner templates . For instance, you can arrange for a multilevel heading labels, beginning at level-2 headings, with labels = {'h2': 'H.1. ,*'} . By default, labels is {} . progress An object accepting error, warning and progress messages. This should be an instance of lamarkdown.lib.Progress , and the extension will reuse Lamarkdown\u2019s \u201ccurrent\u201d instance by default, if available. -","title":"la.labels"},{"location":"extensions/labels/#lalabels","text":"This extension assigns counter-based (or fixed) labels to headings, lists, figures and tables, and lets you use those labels in links to labelled elements. You can specify where and how labels should appear by: Adding the -label=... directive to headings, lists, figures and tables; or Specifying the labels configuration option . In both cases, you provide a label template . Note Remember that, while the following examples all use the -label directive, you can just as easily write templates using the labels configuration option. In the latter case, you may not need to modify the .md file at all in order to produce the labelling systems you want.","title":"la.labels"},{"location":"extensions/labels/#templates","text":"A label template has several parts.","title":"1. Label Templates"},{"location":"extensions/labels/#11-counter-types","text":"A counter type is a system for counting integers. Given -label=\"1\" , the 1 is a counter type representing base-10 Arabic numerals. You can also provide A or a for upper/lower-case alphabetic numbering, I or i for upper/lower-case Roman numerals, or one of various longer-form names corresponding to CSS counter styles (e.g., simp-chinese-informal , lower-greek , lower-hexadecimal , etc.). ## Heading {-label=\"i \"} ## Heading {-label=\"simp-chinese-formal \"} 1. List item 2. List item Design Notes The available counter types are essentially the same as the values supported by the list-style-type CSS property , except for : Bullet-points like disc , circle , square , disclosure-open and disclosure-closed (which would simply duplicate literal Unicode characters); Global CSS values like inherit , initial , etc.; The value none ; Custom counter styles. The use of CSS belies some internal complexity. Lists are numbered by generating CSS code that itself produces the labels (because this seems the conventional approach to HTML/CSS lists). However, headings (and figures and tables) are labelled at compile time , the labels becoming part of the HTML document content. This is partly because the toc extension will read heading text (at compile time, of course), and reproduce it inside the table-of-contents, and we\u2019d ideally like the table-of-contents to contain the same heading labels that the headings themselves do. To support compile-time labelling, la.labels must implement much of the same counter logic as browsers do to support CSS\u2019s @counter-style construct . A future version of Lamarkdown may: Provide a configuration option to determine which implementation approach to use for which type of element; and/or Provide a way to define custom counter types, similar to @counter-style .","title":"1.1. Counter Types"},{"location":"extensions/labels/#12-literals","text":"Literal strings can appear as the prefix and suffix of a label. In -label=\"(1) \" , the ( is a prefix, and ) is a suffix. Literals may contain any number of characters, including zero: e.g.: {-label=\"@@@ A @@@\"} 1. List item 2. List item 3. List item Literals can consist of: Spaces and all printable symbols other than ASCII digits, letters, quotation marks, , , - and * . - , when not between alphanumeric characters (where it is considered part of a counter type). * , when not the final character following , (where it has a special meaning, explained below ). Characters within an additional pair of quotation marks. There will already be a pair of quotation marks around the entire template (whether -label='...' or label=\"...\" ), so the inner quotation marks must be different. For instance: {-label=\"'Table' 1.\"} Column A | Column B -------- | -------- One | Two Three | Four Column C | Column D -------- | -------- Five | Six Seven | Eight Quotation marks, when doubled-up within other quotation marks; e.g., -label=\"''''1''''\" produces a base-10 arabic number inside a single set of quotation marks: '1' , '2' , etc. Note: the attribute syntax (the general form attr=\"value\" ) has its own separate way of escaping characters with \\ , but this is invisible to the template syntax, so cannot be used to designate literal characters. A label may consist of just a literal string, with no counter type, which can be useful in unordered lists: {-label=\"{-\u29bf-} \"} * List item * List item * List item","title":"1.2. Literals"},{"location":"extensions/labels/#parents","text":"A parent indicator (if present) is used to make hierarchical labels. It acts as a placeholder for a higher-level label, which then forms part of the lower-level label, preceeding the lower-level counter. (The higher-level label\u2019s own prefix and suffix are removed.) A template with a parent indicator has a form similar to -label=\"(L.1) \" , where L is the parent indicator, and . is a separator literal (which can be any valid literal). L specifically refers to the label of the next higher list , if one exists. For instance: {-label=\"L.1. \"} 1. Item 2. Item {-label=\"[L.A] \"} 1. Item 2. Item {-label=\"_L_i_ \"} 1. Item 2. Item 3. Item 3. Item In the first label template above, the L. part will be ignored, because there is no higher list level. Similarly, the parent indicator H refers to the label of the next higher heading (if one exists): {-label=\"H.1. \"} ## Heading ## Heading {-label=\"[H.A] \"} ### Heading ### Heading {-label=\"_H_i_ \"} #### Heading #### Heading ### Heading ## Heading Meanwhile, X refers to the next label label of any kind. For example, here are some <h3> headings, within an <ol> list, underneath another <h2> heading, where the labels are arranged hierarchically: {-label=\"1. \"} ## Heading ## Heading {-label=\"[X.A] \"} 1. List item 2. List item {-label=\"_X_i_ \"} ### Heading ### Heading","title":"1.3. Hierarchical Labels"},{"location":"extensions/labels/#inner","text":"An inner template is the part of a template after the first (non-quoted) , . A full label template consists of a , -separated sequence of components (each of which is as described above), optionally ending in ,* . Inner label templates let you set up several levels of labelling in one place. They apply to nested elements of the same type. For instance, -label=\"1. ,(a) ,(i) \" assigns labels 1. , 2. , etc. to the current level, (a) , (b) to singly-nested elements, and (i) , (ii) to doubly-nested elements (all of the same type). {-label=\"1. ,(a), (i) \"} 1. List item 1. List item 1. List item 2. List item 2. List item 2. List item {-label=\"\u2660 ,\u2665, \u2663, \u2666 \"} * List item * List item * List item * List item * List item * List item When ,* occurs after the final template component, it applies that template to all more-deeply nested elements indefinitely (until otherwise overridden). Together with parent indicators, this lets you produce a typical multilevel decimal numbering system with little overhead: {-label=\"H.1. ,*\"} ## Heading ### Heading #### Heading #### Heading ### Heading ## Heading","title":"1.4. Inner Templates"},{"location":"extensions/labels/#2-cross-references","text":"Once elements are labelled, you can create links to them (or parts of them) that include those labels in the link text. Specifically, you must: Assign an ID to the target of a link, e.g., by writing {#myid} before or after it. The ID does not need to be on precisely the element that actually has the label; it may also be on any element inside it. Create a link to that ID, where the link text contains ## . For instance: Some references to headings [ ## ]( #secX ) and [ ## ]( #secY ), and to [ list item ## ]( #itemU ) and [ list item ## ]( #itemV ). {-label=\"1. \"} ## Heading {#secX} ## Heading {#secY} {-label=\"(a) \"} 1. List item {#itemU} 2. List item {#itemV} You can be more specific about what kind of label you want to refer to, by appending a parent indicator to the ## ; e.g., ##H or ##L . You can also have multiple such placeholders for a single link. A reference to [ list item ##L in section ##H ]( #item ). {-label=\"1. \"} ## Heading ## Heading {-label=\"(a) \"} 1. List item 2. List item {#item} Design Notes The use of ## has the advantage that: It is concise, without being too likely to require routine escaping (as a single # may); It appears to reflect a number; It also seems visually-related to the element IDs syntax ( #myid ), while not being exactly the same; and Since it only applies inside link text, it does not conflict with heading syntax. One might compare the approach to LaTeX, which uses \\label and \\ref : A reference to Section \\ref { xyz } . \\section { First } ... \\section { Second } \\label { xyz } ... Markdown and HTML have element IDs in place of \\label . They do not have an exact equivalent of \\ref (which just grabs a label). But rather than trying to recreate \\ref exactly, we accept the preeminence of hyperlinks in Markdown and HTML, and work within them. One theoretical weakness of the la.labels approach is that you cannot make a label reference outside of a hyperlink. There seems little practical drawback to this, though. la.labels does not replace or directly alter the Markdown link-parsing logic, but rather looks for the text inside <a> (anchor) elements once they\u2019ve already been parsed.","title":"2. Cross References"},{"location":"extensions/labels/#3-suppressing-labels-no-label","text":"The -no-label directive will suppress a label in places where one would otherwise occur. The counter will be paused, and carry on at the next applicable element. ## Heading {-label=\"(i) \"} ## Heading {-no-label} ## Heading {-label=\"(i) \"} 1. List item 2. List item {-no-label} 3. List item","title":"3. Suppressing Labels: -no-label"},{"location":"extensions/labels/#4-changing-labels","text":"The label format may be changed part-way through a sequence of elements, simply by assigning a new -label template to one of the elements. For instance: ## Heading {-label=\"(i) \"} ## Heading ## Heading {-label=\"[A] \"} ## Heading {-label=\"(i) \"} 1. List item 2. List item 3. List item {-label=\"[A] \"} 4. List item","title":"4. Changing Labels"},{"location":"extensions/labels/#5-options","text":"The labels option is the one key option for influencing document-wide labelling conventions. The remainder of the options below concern the technical implementation details. Option Description css_fn A function taking a single string parameter, which the extension will call to deliver CSS code, under the assumption that it will be applied to the output document. The extension needs this capability in order to implement CSS-based labels, particularly for ordered/unordered lists. By default, and if it\u2019s available, this will be lamarkdown.css() . If css_fn is None , or if it\u2019s left unspecified and lamarkdown.css() is not available (because the extension is being run externally), then CSS-based labels will be disabled. In this case, the extension will fall back to hard-coding list labels in the HTML document. This may be visually indistinguishable, though not necessarily semantically equivalent. css_rendering A set containing element types that will receive CSS-based label rendering, if it\u2019s available, rather than hard-coded labels. It\u2019s not currently recommended to change this, because the underlying implementation only currently supports CSS-based rendering for list labels. directives An object for retrieving directives from HTML tree elements. This should be an instance of lamarkdown.lib.directives.Directives , and the extension will reuse Lamarkdown\u2019s \u201ccurrent\u201d instance by default, if available. label_processors A list of LabelProcessor objects responsible for orchestrating the labelling of different kinds of HTML elements. It\u2019s not currently recommended to change this. labels A dictionary specifying label templates to use in the absence of -label directives. The dictionary keys are h (for headings), \u201c h n \u201d (for level- n headings specifically), ol (for ordered lists), ul (for unordered lists), figure and table . The dictionary values are label templates . Just as for the -label directive, these templates can also include parent indicators and inner templates . For instance, you can arrange for a multilevel heading labels, beginning at level-2 headings, with labels = {'h2': 'H.1. ,*'} . By default, labels is {} . progress An object accepting error, warning and progress messages. This should be an instance of lamarkdown.lib.Progress , and the extension will reuse Lamarkdown\u2019s \u201ccurrent\u201d instance by default, if available. -","title":"5. Options"},{"location":"extensions/latex/","text":"la.latex This extension lets you embed LaTeX code in Markdown documents. The intention is to support LaTeX-based diagrams, as well as LaTeX mathematical code, and there is a different syntactical approach for each. 1. Diagrammatic (or Textual) LaTeX Code You can write either an entire LaTeX document, or a single LaTeX environment, directly within an .md file. This is intended for diagram-generating code, though you can in theory embed any arbitrary LaTeX output. The extension will: Pass the LaTeX code to an external LaTeX compiler, retrieving output in PDF form; Pass the PDF file to another external command to convert it to SVG; and Embed the SVG in the output HTML. The LaTeX code must begin on a new line (though not necessarily a new paragraph). Immediately underneath the LaTeX code, on a new line, you may write an attribute list . This will attach HTML attributes to the resulting HTML output element, and may be important for accessibility (among other things). For instance, you could write { alt=\"A diagram showing ...\" } at the bottom. Design Notes We choose to allow direct embedding of LaTeX code (for non-mathematical purposes), without any extra delimiter syntax. This results in some additional internal design complexity within Lamarkdown, considering it could have used PyMdown\u2019s blocks mechanism , or its superfences extension . However, LaTeX effectively comes with its own delimiter syntax, and its direct inclusion seems unambiguous, given the requirements above. Thus, any extra syntax might feel like clutter to readers and authors. There is also a precedent, in a sense. Markdown already permits embedded HTML without any delimiters, because it too is unambiguous. 1.1. Whole Document If you embed an entire LaTeX document, it is expected to begin with \\documentclass and end with \\end{document} . For instance: # Embedding a Whole LaTeX Document \\documentclass{article} \\usepackage{ulem} \\begin{document} \\emph{Compiled with LaTeX.} \\end{document} { alt=\"Textual explanation\" } Resuming the markdown syntax here. 1.2. Single Environment To embed just a single environment (with optional preamble), your LaTeX code must: Start with one of \\usepackage , \\usetikzlibrary or \\begin{ name } (where name is any LaTeX environment); Contain \\begin{ name } (if it didn\u2019t start with it); and End with \\end{ name } . For instance: # Embedding a LaTeX Environment Important diagram: \\begin{tikzpicture} \\path (0,0) node(a) {Start} -- (2,0) node(b) {End}; \\draw[->] (a) -- (b); \\end{tikzpicture} { alt=\"Textual explanation\" } Please contact us for details. The extension fills in the remaining syntax ( \\documentclass and \\begin{document}...\\end{document} , as needed) to form a valid LaTeX document. 2. Mathematics You can also embed LaTeX mathematical code within $...$ (for inline maths) or $$...$$ (for block-form equations). By default (or if math=\"mathml\" ), the extension uses latex2mathml to produce MathML code, which is included directly in the output document. If math=\"latex\" , then mathematical code will instead be compiled and converted using the same external commands as in section 1 , just in math mode. Processing of math code can also be turned off with math=\"ignore\" (either to restore the literal meaning of $ , or to use an alternate math code processor like pymdownx.arithmatex ). 3. Options Here\u2019s a full list of supported config options: Option Description build_dir The location to write LaTeX\u2019s various temporary/intermediate files. By default, the extension uses Lamarkdown\u2019s own build directory (by default, build/ ). cache A dictionary-like object for caching the output of the LaTeX compiler and PDF-to-SVG converter. Invoking these programs can take significant time, so they are only invoked when the contents of a given LaTeX section changes, or when a file included by the LaTeX code changes. By default, the extension uses Lamarkdown\u2019s build cache . doc_class The documentclass to use when not explicitly given. By default, this is standalone . doc_class_options Options to be passed to the documentclass , as a single string (comma-separated, as per LaTeX syntax). By default, this is empty. embedding Either data_uri or svg_element . If data_uri is chosen, the output is embedded using an <img> element with a data: URI. Otherwise, it is included as an <svg> element. This is separate from Lamarkdown\u2019s core resource embedding functionality; LaTeX output is always embedded, but there is a choice of mechanism. live_update_deps A set-like object into which the extension records the names of any files that the given TeX code depends on, such as images or other included TeX code (but not including the TeX installation itself). By default, if available, the extension will use Lamarkdown\u2019s \u201ccurrent\u201d set of such dependencies. This has no effect on the output produced, but assists Lamarkdown in understanding when it should recompile the .md document. math Specifies how to handle $...$ and $$...$$ sequences. The options are: mathml (the default), where mathematical code is converted to MathML <math> elements, to be rendered by the browser; latex , where mathematical code is compiled in essentially the same way as for \\begin{}...\\end{} blocks, but in LaTeX math mode; and ignore , where mathematical code is left untouched by this extension, which may be needed if you\u2019re using another extension (like pymdownx.arithmatex ) to handle it. pdf_svg_converter The command to use to convert LaTeX PDF output to SVG form. This can be either dvisvgm (the default), or pdf2svg , or inkscape , or a complete command that contains the special placeholders in.pdf and/or out.svg . These will be replaced with the appropriate temporary input/output files. prepend Any common LaTeX code (by default, none) to be added to the front of each LaTeX snippet, immediately after \\documentclass{...} . You can use this to add common packages, define \\newcommand s, etc. import lamarkdown as la la ( 'la.latex' , prepend = r ''' \\usepackage[default] {opensans} \\newcommand{\\mycmd} {xyz} ''' ) progress An object accepting error, warning and progress messages. This should be an instance of lamarkdown.lib.Progress , and the extension will reuse Lamarkdown\u2019s \u201ccurrent\u201d instance by default, if available. strip_html_comments True (the default) to remove HTML-style comments <!-- ... --> from within LaTeX code, for consistency with the rest of the .md file. If False , such comments will be considered ordinary text and passed to the LaTeX compiler, for whatever it will make of them. The normal LaTeX % comments are available in either case. tex The command to use to compile LaTeX code. This can be either xelatex (the default), or pdflatex , or a complete command that contains the special placeholders in.tex and/or out.pdf . These will be replaced with the appropriate temporary input/output files. timeout The amount of time to wait (in seconds) before the TeX command will be terminated, after it stops outputting messages. This is 3 seconds by default. verbose_errors If True , then everything the TeX command writes to standard output will be included in any error messages. If False (the default), the extension will try to detect the start of any actual error message, and only output that.","title":"la.latex"},{"location":"extensions/latex/#lalatex","text":"This extension lets you embed LaTeX code in Markdown documents. The intention is to support LaTeX-based diagrams, as well as LaTeX mathematical code, and there is a different syntactical approach for each.","title":"la.latex"},{"location":"extensions/latex/#whole","text":"You can write either an entire LaTeX document, or a single LaTeX environment, directly within an .md file. This is intended for diagram-generating code, though you can in theory embed any arbitrary LaTeX output. The extension will: Pass the LaTeX code to an external LaTeX compiler, retrieving output in PDF form; Pass the PDF file to another external command to convert it to SVG; and Embed the SVG in the output HTML. The LaTeX code must begin on a new line (though not necessarily a new paragraph). Immediately underneath the LaTeX code, on a new line, you may write an attribute list . This will attach HTML attributes to the resulting HTML output element, and may be important for accessibility (among other things). For instance, you could write { alt=\"A diagram showing ...\" } at the bottom. Design Notes We choose to allow direct embedding of LaTeX code (for non-mathematical purposes), without any extra delimiter syntax. This results in some additional internal design complexity within Lamarkdown, considering it could have used PyMdown\u2019s blocks mechanism , or its superfences extension . However, LaTeX effectively comes with its own delimiter syntax, and its direct inclusion seems unambiguous, given the requirements above. Thus, any extra syntax might feel like clutter to readers and authors. There is also a precedent, in a sense. Markdown already permits embedded HTML without any delimiters, because it too is unambiguous.","title":"1. Diagrammatic (or Textual) LaTeX Code"},{"location":"extensions/latex/#11-whole-document","text":"If you embed an entire LaTeX document, it is expected to begin with \\documentclass and end with \\end{document} . For instance: # Embedding a Whole LaTeX Document \\documentclass{article} \\usepackage{ulem} \\begin{document} \\emph{Compiled with LaTeX.} \\end{document} { alt=\"Textual explanation\" } Resuming the markdown syntax here.","title":"1.1. Whole Document"},{"location":"extensions/latex/#12-single-environment","text":"To embed just a single environment (with optional preamble), your LaTeX code must: Start with one of \\usepackage , \\usetikzlibrary or \\begin{ name } (where name is any LaTeX environment); Contain \\begin{ name } (if it didn\u2019t start with it); and End with \\end{ name } . For instance: # Embedding a LaTeX Environment Important diagram: \\begin{tikzpicture} \\path (0,0) node(a) {Start} -- (2,0) node(b) {End}; \\draw[->] (a) -- (b); \\end{tikzpicture} { alt=\"Textual explanation\" } Please contact us for details. The extension fills in the remaining syntax ( \\documentclass and \\begin{document}...\\end{document} , as needed) to form a valid LaTeX document.","title":"1.2. Single Environment"},{"location":"extensions/latex/#2-mathematics","text":"You can also embed LaTeX mathematical code within $...$ (for inline maths) or $$...$$ (for block-form equations). By default (or if math=\"mathml\" ), the extension uses latex2mathml to produce MathML code, which is included directly in the output document. If math=\"latex\" , then mathematical code will instead be compiled and converted using the same external commands as in section 1 , just in math mode. Processing of math code can also be turned off with math=\"ignore\" (either to restore the literal meaning of $ , or to use an alternate math code processor like pymdownx.arithmatex ).","title":"2. Mathematics"},{"location":"extensions/latex/#3-options","text":"Here\u2019s a full list of supported config options: Option Description build_dir The location to write LaTeX\u2019s various temporary/intermediate files. By default, the extension uses Lamarkdown\u2019s own build directory (by default, build/ ). cache A dictionary-like object for caching the output of the LaTeX compiler and PDF-to-SVG converter. Invoking these programs can take significant time, so they are only invoked when the contents of a given LaTeX section changes, or when a file included by the LaTeX code changes. By default, the extension uses Lamarkdown\u2019s build cache . doc_class The documentclass to use when not explicitly given. By default, this is standalone . doc_class_options Options to be passed to the documentclass , as a single string (comma-separated, as per LaTeX syntax). By default, this is empty. embedding Either data_uri or svg_element . If data_uri is chosen, the output is embedded using an <img> element with a data: URI. Otherwise, it is included as an <svg> element. This is separate from Lamarkdown\u2019s core resource embedding functionality; LaTeX output is always embedded, but there is a choice of mechanism. live_update_deps A set-like object into which the extension records the names of any files that the given TeX code depends on, such as images or other included TeX code (but not including the TeX installation itself). By default, if available, the extension will use Lamarkdown\u2019s \u201ccurrent\u201d set of such dependencies. This has no effect on the output produced, but assists Lamarkdown in understanding when it should recompile the .md document. math Specifies how to handle $...$ and $$...$$ sequences. The options are: mathml (the default), where mathematical code is converted to MathML <math> elements, to be rendered by the browser; latex , where mathematical code is compiled in essentially the same way as for \\begin{}...\\end{} blocks, but in LaTeX math mode; and ignore , where mathematical code is left untouched by this extension, which may be needed if you\u2019re using another extension (like pymdownx.arithmatex ) to handle it. pdf_svg_converter The command to use to convert LaTeX PDF output to SVG form. This can be either dvisvgm (the default), or pdf2svg , or inkscape , or a complete command that contains the special placeholders in.pdf and/or out.svg . These will be replaced with the appropriate temporary input/output files. prepend Any common LaTeX code (by default, none) to be added to the front of each LaTeX snippet, immediately after \\documentclass{...} . You can use this to add common packages, define \\newcommand s, etc. import lamarkdown as la la ( 'la.latex' , prepend = r ''' \\usepackage[default] {opensans} \\newcommand{\\mycmd} {xyz} ''' ) progress An object accepting error, warning and progress messages. This should be an instance of lamarkdown.lib.Progress , and the extension will reuse Lamarkdown\u2019s \u201ccurrent\u201d instance by default, if available. strip_html_comments True (the default) to remove HTML-style comments <!-- ... --> from within LaTeX code, for consistency with the rest of the .md file. If False , such comments will be considered ordinary text and passed to the LaTeX compiler, for whatever it will make of them. The normal LaTeX % comments are available in either case. tex The command to use to compile LaTeX code. This can be either xelatex (the default), or pdflatex , or a complete command that contains the special placeholders in.tex and/or out.pdf . These will be replaced with the appropriate temporary input/output files. timeout The amount of time to wait (in seconds) before the TeX command will be terminated, after it stops outputting messages. This is 3 seconds by default. verbose_errors If True , then everything the TeX command writes to standard output will be included in any error messages. If False (the default), the extension will try to detect the start of any actual error message, and only output that.","title":"3. Options"},{"location":"extensions/list_tables/","text":"la.list_tables This extension ( inspired by reStructuredText ) provides an alternative to the tables extension, and other 3rd-party extensions. A \u201clist table\u201d comprises a list of lists in Markdown, which are transformed into a proper table in the HTML output. The mechanism permits the creation of arbitrarily complex tables. Here\u2019s a simple example: import lamarkdown as la la ( 'la.list_tables' , 'pymdownx.superfences' ) la . css ( 'table { border-collapse: collapse; width: 100%; }' 'td { border: 1px solid blue; padding: 0.5em}' ) {-list-table} * - # Col Heading A - # Col Heading B - # Col Heading C * - A paragraph. Another paragraph. - * List item A * List item B - Some important code: ``` print(\"Hi!\") ``` * - Row 2, Col A - Row 2, Col B - Row 2, Col C You place the -list-table directive prior to a list of lists (using the la.attr_prefix extension, which is loaded automatically by la.list_tables ). Then, each item in the outer list represents a table row, and each item in each inner list representes a table cell. The use of # at the start of a cell indicates a header <th> cell (as opposed to a normal <td> cell). The use of # at the start of a row makes every cell in that row a header cell (whether or not they individually start with # ); e.g.: {-list-table} * # - Col Heading A - Col Heading B - Col Heading C * - Row 1, Col A - Row 1, Col B - Row 1, Col C * - Row 2, Col A - Row 2, Col B - Row 2, Col C Design Notes Python-Markdown includes a built-in tables extension, and there are other 3rd-party extensions that add more flexible/featureful approaches to creating tables. These require that you \u201cdraw\u201d a table in plain text, using the - and | ASCII characters, with essentially the same structure as would appear in the output; e.g.: With the `tables` extension: Col A | Col B | Col C ----- | ----- | ----- one | two | three four | five | six This is in keeping with the notion that raw Markdown text should closely resemble the formatted output document, so that the raw text can stand on its own. For tables, this ASCII line-drawing approach works well if the cell contents are small and simple. However, it becomes difficult for long or complex table data, where problems include: Readability, since (if using the tables extension) an entire table row must fit on a single plain-text line without breaks. Maintainability. Even if (using a different extension) you are permitted to split the contents of cells over multiple lines, an ASCII line-drawing approach requires you to keep cell contents boxed within a rectangular region, with other cells to the right and left sharing the same lines. Text editors rarely (if ever, depending on your perspective) provide a convenient way to edit such regions, without disrupting adjacent regions. Technical workability, for when you wish to put block elements like lists or code blocks inside a table cell, or simply multiple paragraphs. Other suggestions for the handling of complex tables include: Use HTML embedded within Markdown, which is technically workable, but does not solve the readability problem, and has debatable maintainability; Don\u2019t, because Markdown \u201cisn\u2019t the right tool for the job\u201d. List tables represent a less severe compromise. The Markdown text and the output are structurally different, but the raw text appears in a relatively readable form that has few technical limits or maintainability challenges. 1. Parsing and Co-opting This extension does not directly parse anything, and does not technically introduce any new syntax. Rather, it co-opts existing parsing mechanisms, though this requires some care and understanding from users. Markdown understands * - # ... as being the first item in a nested list, containing a heading. However, it does not understand * # - ... as being a nested list of headings; hence we must leave the * # on a separate line. The # character traditionally represents the <h1> heading element, and is parsed as such even inside lists. The extension co-opts and rewrites such elements, while leaving other heading levels ( <h2> - <h6> ) alone. Design Notes We use # for table heading cells on the grounds that: We require some way to indicate table headings; In context, using # for this is broadly, conceptually consistent with its use elsewhere; The use of actual <h1> elements inside a table is probably unnecessary (and perhaps questionable); and If one actually does need <h1> inside a table, one can still write it using raw HTML (which the extension cannot see). 2. Semantic Table Structure The extension will seek to separate the table into header, body, and footer sections, as follows: Any unbroken sequence of rows at the start of the table that contain only header cells will form the table header ( <thead> ). (If there are no such rows at the start, then <thead> is omitted.) Row(s) immediately following the header form part of the table body ( <tbody> ). The body may contain a mix of header ( <th> ) and data ( <td> ) cells, but may not contain a row of only <th> cells. (If there are no such rows, then <tbody> is omitted.) The next header-cell-only row (if any), after the start of the table body, marks the start of the table footer ( <tfoot> ), and the remainder of the table is assigned here. (If there is no such row, or if the table body is omitted, then <tfoot> is omitted.) 3. Heading Trees The extension permits another way to specify the table header, designed for tables having a hierarchy of column headings across several rows. In such cases, one may provide corresponding nested lists representing the header tree structure: {-list-table} * # - Major Heading A - AA - AB - ABA - ABB - Major Heading B - BA - BB * - Row 1, Col AA - Row 1, Col ABA - Row 1, Col ABB - Row 1, Col BA - Row 1, Col BB * - Row 2, Col AA - Row 2, Col ABA - Row 2, Col ABB - Row 2, Col BA - Row 2, Col BB This only applies to the table header, and for it to work, there must initially be only a single heading row. This is then expanded into further rows as needed to accommodate the subheadings. The extension inserts HTML rowspan=... and colspan=... attributes to ensure headings occupy the appropriate amount of space. The number of data columns (5 in this case) is equal to the number of leaf headings in the heading tree (not the number of headings overall). 4. Options Option Description directives An object for retrieving directives from HTML tree elements. This should be an instance of lamarkdown.lib.directives.Directives , and the extension will reuse Lamarkdown\u2019s \u201ccurrent\u201d instance by default, if available.","title":"la.list_tables"},{"location":"extensions/list_tables/#lalist_tables","text":"This extension ( inspired by reStructuredText ) provides an alternative to the tables extension, and other 3rd-party extensions. A \u201clist table\u201d comprises a list of lists in Markdown, which are transformed into a proper table in the HTML output. The mechanism permits the creation of arbitrarily complex tables. Here\u2019s a simple example: import lamarkdown as la la ( 'la.list_tables' , 'pymdownx.superfences' ) la . css ( 'table { border-collapse: collapse; width: 100%; }' 'td { border: 1px solid blue; padding: 0.5em}' ) {-list-table} * - # Col Heading A - # Col Heading B - # Col Heading C * - A paragraph. Another paragraph. - * List item A * List item B - Some important code: ``` print(\"Hi!\") ``` * - Row 2, Col A - Row 2, Col B - Row 2, Col C You place the -list-table directive prior to a list of lists (using the la.attr_prefix extension, which is loaded automatically by la.list_tables ). Then, each item in the outer list represents a table row, and each item in each inner list representes a table cell. The use of # at the start of a cell indicates a header <th> cell (as opposed to a normal <td> cell). The use of # at the start of a row makes every cell in that row a header cell (whether or not they individually start with # ); e.g.: {-list-table} * # - Col Heading A - Col Heading B - Col Heading C * - Row 1, Col A - Row 1, Col B - Row 1, Col C * - Row 2, Col A - Row 2, Col B - Row 2, Col C Design Notes Python-Markdown includes a built-in tables extension, and there are other 3rd-party extensions that add more flexible/featureful approaches to creating tables. These require that you \u201cdraw\u201d a table in plain text, using the - and | ASCII characters, with essentially the same structure as would appear in the output; e.g.: With the `tables` extension: Col A | Col B | Col C ----- | ----- | ----- one | two | three four | five | six This is in keeping with the notion that raw Markdown text should closely resemble the formatted output document, so that the raw text can stand on its own. For tables, this ASCII line-drawing approach works well if the cell contents are small and simple. However, it becomes difficult for long or complex table data, where problems include: Readability, since (if using the tables extension) an entire table row must fit on a single plain-text line without breaks. Maintainability. Even if (using a different extension) you are permitted to split the contents of cells over multiple lines, an ASCII line-drawing approach requires you to keep cell contents boxed within a rectangular region, with other cells to the right and left sharing the same lines. Text editors rarely (if ever, depending on your perspective) provide a convenient way to edit such regions, without disrupting adjacent regions. Technical workability, for when you wish to put block elements like lists or code blocks inside a table cell, or simply multiple paragraphs. Other suggestions for the handling of complex tables include: Use HTML embedded within Markdown, which is technically workable, but does not solve the readability problem, and has debatable maintainability; Don\u2019t, because Markdown \u201cisn\u2019t the right tool for the job\u201d. List tables represent a less severe compromise. The Markdown text and the output are structurally different, but the raw text appears in a relatively readable form that has few technical limits or maintainability challenges.","title":"la.list_tables"},{"location":"extensions/list_tables/#1-parsing-and-co-opting","text":"This extension does not directly parse anything, and does not technically introduce any new syntax. Rather, it co-opts existing parsing mechanisms, though this requires some care and understanding from users. Markdown understands * - # ... as being the first item in a nested list, containing a heading. However, it does not understand * # - ... as being a nested list of headings; hence we must leave the * # on a separate line. The # character traditionally represents the <h1> heading element, and is parsed as such even inside lists. The extension co-opts and rewrites such elements, while leaving other heading levels ( <h2> - <h6> ) alone. Design Notes We use # for table heading cells on the grounds that: We require some way to indicate table headings; In context, using # for this is broadly, conceptually consistent with its use elsewhere; The use of actual <h1> elements inside a table is probably unnecessary (and perhaps questionable); and If one actually does need <h1> inside a table, one can still write it using raw HTML (which the extension cannot see).","title":"1. Parsing and Co-opting"},{"location":"extensions/list_tables/#2-semantic-table-structure","text":"The extension will seek to separate the table into header, body, and footer sections, as follows: Any unbroken sequence of rows at the start of the table that contain only header cells will form the table header ( <thead> ). (If there are no such rows at the start, then <thead> is omitted.) Row(s) immediately following the header form part of the table body ( <tbody> ). The body may contain a mix of header ( <th> ) and data ( <td> ) cells, but may not contain a row of only <th> cells. (If there are no such rows, then <tbody> is omitted.) The next header-cell-only row (if any), after the start of the table body, marks the start of the table footer ( <tfoot> ), and the remainder of the table is assigned here. (If there is no such row, or if the table body is omitted, then <tfoot> is omitted.)","title":"2. Semantic Table Structure"},{"location":"extensions/list_tables/#3-heading-trees","text":"The extension permits another way to specify the table header, designed for tables having a hierarchy of column headings across several rows. In such cases, one may provide corresponding nested lists representing the header tree structure: {-list-table} * # - Major Heading A - AA - AB - ABA - ABB - Major Heading B - BA - BB * - Row 1, Col AA - Row 1, Col ABA - Row 1, Col ABB - Row 1, Col BA - Row 1, Col BB * - Row 2, Col AA - Row 2, Col ABA - Row 2, Col ABB - Row 2, Col BA - Row 2, Col BB This only applies to the table header, and for it to work, there must initially be only a single heading row. This is then expanded into further rows as needed to accommodate the subheadings. The extension inserts HTML rowspan=... and colspan=... attributes to ensure headings occupy the appropriate amount of space. The number of data columns (5 in this case) is equal to the number of leaf headings in the heading tree (not the number of headings overall).","title":"3. Heading Trees"},{"location":"extensions/list_tables/#4-options","text":"Option Description directives An object for retrieving directives from HTML tree elements. This should be an instance of lamarkdown.lib.directives.Directives , and the extension will reuse Lamarkdown\u2019s \u201ccurrent\u201d instance by default, if available.","title":"4. Options"},{"location":"extensions/markdown_demo/","text":"la.markdown_demo TBD","title":"la.markdown_demo"},{"location":"extensions/markdown_demo/#lamarkdown_demo","text":"TBD","title":"la.markdown_demo"},{"location":"extensions/sections/","text":"la.sections This extension lets you break up a document into sections\u2014formally, using HTML <section> elements\u2014by writing --- . For instance: import lamarkdown as la la ( 'la.sections' ) la . css ( 'section { margin: 1em 0; padding: 0 1em; ' ' border: 1px solid blue; }' ) Section A. --- Section B. With some more text. --- Section C. The key motivation is to support the RevealJS presentation framework (and similar), which uses <section> elements to define slide show frames. Each --- separator must be written on a separate line, surrounded by blank lines. You may attach attributes to sections by writing an attribute list on the line immediately below --- (if the attr_list extension is loaded); e.g.: import lamarkdown as la la ( 'la.sections' , 'attr_list' , 'la.attr_prefix' ) la . css ( 'section { margin: 1em 0; padding: 0 1em; }' '.red { background: #ffc0c0; }' '.green { background: #c0ffc0; }' '.blue { background: #c0c0ff; }' ) --- {.red} Section A. --- {.green} Section B. With some more text. --- {.blue} Section C. For this purpose, a separator is permitted to appear at the very top of the file. This does not create a blank section before all others, but just provides a syntactic feature to let attributes be assigned to the first section. Design Notes RevealJS already provides its own Markdown plugin , but this is a dynamic, JavaScript-based approach that must parse and convert the Markdown each time the document is loaded. Using Lamarkdown, we can achieve the same thing statically (except for the core RevealJS logic), without the load-time performance and memory overhead, and with access to the full range of Python-Markdown extensions. The separator --- is chosen because various Markdown presentation tools already use it: RevealJS\u2019s Markdown plugin , Marp/Marpit , Remark , Spectacle , and possibly others. In conventional Markdown, --- has other uses, depending on where it appears: If immediately below a line of text, it converts that text into an <h1> heading. This extension does not interfere with this. Otherwise, --- normally represents the <hr> (horizontal rule) element, and this extension does override this behaviour. However: You can still produce an <hr> by writing ---- (or more - characters); and You may specify an alternate section separator as a configuration option. Options Option Description separator Sections will be divided by this string (when it appears as its own top-level block). By default, this is --- .","title":"la.sections"},{"location":"extensions/sections/#lasections","text":"This extension lets you break up a document into sections\u2014formally, using HTML <section> elements\u2014by writing --- . For instance: import lamarkdown as la la ( 'la.sections' ) la . css ( 'section { margin: 1em 0; padding: 0 1em; ' ' border: 1px solid blue; }' ) Section A. --- Section B. With some more text. --- Section C. The key motivation is to support the RevealJS presentation framework (and similar), which uses <section> elements to define slide show frames. Each --- separator must be written on a separate line, surrounded by blank lines. You may attach attributes to sections by writing an attribute list on the line immediately below --- (if the attr_list extension is loaded); e.g.: import lamarkdown as la la ( 'la.sections' , 'attr_list' , 'la.attr_prefix' ) la . css ( 'section { margin: 1em 0; padding: 0 1em; }' '.red { background: #ffc0c0; }' '.green { background: #c0ffc0; }' '.blue { background: #c0c0ff; }' ) --- {.red} Section A. --- {.green} Section B. With some more text. --- {.blue} Section C. For this purpose, a separator is permitted to appear at the very top of the file. This does not create a blank section before all others, but just provides a syntactic feature to let attributes be assigned to the first section. Design Notes RevealJS already provides its own Markdown plugin , but this is a dynamic, JavaScript-based approach that must parse and convert the Markdown each time the document is loaded. Using Lamarkdown, we can achieve the same thing statically (except for the core RevealJS logic), without the load-time performance and memory overhead, and with access to the full range of Python-Markdown extensions. The separator --- is chosen because various Markdown presentation tools already use it: RevealJS\u2019s Markdown plugin , Marp/Marpit , Remark , Spectacle , and possibly others. In conventional Markdown, --- has other uses, depending on where it appears: If immediately below a line of text, it converts that text into an <h1> heading. This extension does not interfere with this. Otherwise, --- normally represents the <hr> (horizontal rule) element, and this extension does override this behaviour. However: You can still produce an <hr> by writing ---- (or more - characters); and You may specify an alternate section separator as a configuration option.","title":"la.sections"},{"location":"extensions/sections/#options","text":"Option Description separator Sections will be divided by this string (when it appears as its own top-level block). By default, this is --- .","title":"Options"},{"location":"modules/","text":"Build Modules Build modules are high-level bundles of settings, with various built-in ones available via lamarkdown.m.<modulename>() ; e.g.: import lamarkdown as la la . m . plots () # Invoke the m.plots build module Here are the standard build modules: Build Module Description m.doc() Styles output as a professional-looking document, and invokes various extensions. Acts as the set of defaults when no build files exist. m.plots() Adds support for several text-based graphics tools. m.code() Adds styling for syntax-highlighted code, as produced by Pygments . m.page_numbers() Adds pseudo-page numbers to the output document. m.teaching() Adds styling relevant to an educational environment, for tests or other assessments. You can create your own build module as a standard Python module. Within the module, place all Lamarkdown API calls inside a function, and invoke a function from your build file: # my_build_mod.py (custom build module) from lamarkdown import la def apply (): la . css ( 'p { background: black; color: white; }' ) # md_build.py (build file) import my_build_mod my_build_mod . apply () # Invoke your custom build module Design Notes The function can be called anything. It is required, though, because putting Lamarkdown API calls into the top-level scope of your custom build module won\u2019t work reliably, especially in live update ( -l / --live ) mode. Code in this scope only runs once , when the module is first loaded, whereas we want it to run whenever the document is recompiled. By contrast, build files (e.g., md_build.py ) do have code in their top-level scope, because they are loaded/re-loaded via a customised mechanism, not a standard import statement.","title":"Overview"},{"location":"modules/#build-modules","text":"Build modules are high-level bundles of settings, with various built-in ones available via lamarkdown.m.<modulename>() ; e.g.: import lamarkdown as la la . m . plots () # Invoke the m.plots build module Here are the standard build modules: Build Module Description m.doc() Styles output as a professional-looking document, and invokes various extensions. Acts as the set of defaults when no build files exist. m.plots() Adds support for several text-based graphics tools. m.code() Adds styling for syntax-highlighted code, as produced by Pygments . m.page_numbers() Adds pseudo-page numbers to the output document. m.teaching() Adds styling relevant to an educational environment, for tests or other assessments. You can create your own build module as a standard Python module. Within the module, place all Lamarkdown API calls inside a function, and invoke a function from your build file: # my_build_mod.py (custom build module) from lamarkdown import la def apply (): la . css ( 'p { background: black; color: white; }' ) # md_build.py (build file) import my_build_mod my_build_mod . apply () # Invoke your custom build module Design Notes The function can be called anything. It is required, though, because putting Lamarkdown API calls into the top-level scope of your custom build module won\u2019t work reliably, especially in live update ( -l / --live ) mode. Code in this scope only runs once , when the module is first loaded, whereas we want it to run whenever the document is recompiled. By contrast, build files (e.g., md_build.py ) do have code in their top-level scope, because they are loaded/re-loaded via a customised mechanism, not a standard import statement.","title":"Build Modules"},{"location":"modules/code/","text":"m.code() TODO","title":"m.code"},{"location":"modules/code/#mcode","text":"TODO","title":"m.code()"},{"location":"modules/doc/","text":"m.doc() A build module for styling output as a professional-looking document (albeit an unpaginated document), while invoking a range of Markdown extensions to improve productivity. (See the list of extensions for the subset of extensions invoked by m.doc() .) m.doc() has a slightly special status compared to other build modules . It can be used like the others, but it also represents the default build settings for when no build files exist. It is designed to let authors use a sophisticated array of markdown syntax and functionality with zero configuration. Among other things, m.doc() loads the Python Markdown toc (table-of-contents) extension. If the .md file contains the placeholder [TOC] , then toc generates a table-of-contents, and m.doc() will cause it to appear as a separately-scrolling sidebar (or in-place if the document is printed).","title":"m.doc"},{"location":"modules/doc/#mdoc","text":"A build module for styling output as a professional-looking document (albeit an unpaginated document), while invoking a range of Markdown extensions to improve productivity. (See the list of extensions for the subset of extensions invoked by m.doc() .) m.doc() has a slightly special status compared to other build modules . It can be used like the others, but it also represents the default build settings for when no build files exist. It is designed to let authors use a sophisticated array of markdown syntax and functionality with zero configuration. Among other things, m.doc() loads the Python Markdown toc (table-of-contents) extension. If the .md file contains the placeholder [TOC] , then toc generates a table-of-contents, and m.doc() will cause it to appear as a separately-scrolling sidebar (or in-place if the document is printed).","title":"m.doc()"},{"location":"modules/page_numbers/","text":"m.page_numbers() TODO","title":"m.page_numbers"},{"location":"modules/page_numbers/#mpage_numbers","text":"TODO","title":"m.page_numbers()"},{"location":"modules/plots/","text":"m.plots() Adds support for several text-based graphics tools. (In fact, this is loaded automatically by m.doc() .) You use the \u201cfence\u201d notation to write graphics commands, in an appropriate language. For instance: ```graphviz-dot digraph X { start -> A; A -> B; B -> end; } ``` In this example, Lamarkdown will invoke the dot command from Graphviz (which draws diagrams with an automatic layout engine), pass it the digraph X {...} code, retrieve output in SVG (scalable vector graphics) format, and embed it in-place in the document. It will perform equivalent steps for other graphing/plotting notations as well. The name after ``` indicates which notation/tool is to be used. Lamarkdown currently supports: graphviz-circo , graphviz-dot , graphviz-fdp , graphviz-neato , graphviz-osage , graphviz-patchwork , graphviz-sfdp and graphviz-twopi (all from Graphviz of course); plantuml ; matplotlib ; and r-plot (R-based graphics). You will need to manually install these tools yourself (whichever one(s) you intend to use). Note: Lamarkdown also supports embedding LaTeX code , but this does not require fence notation.","title":"m.plots"},{"location":"modules/plots/#mplots","text":"Adds support for several text-based graphics tools. (In fact, this is loaded automatically by m.doc() .) You use the \u201cfence\u201d notation to write graphics commands, in an appropriate language. For instance: ```graphviz-dot digraph X { start -> A; A -> B; B -> end; } ``` In this example, Lamarkdown will invoke the dot command from Graphviz (which draws diagrams with an automatic layout engine), pass it the digraph X {...} code, retrieve output in SVG (scalable vector graphics) format, and embed it in-place in the document. It will perform equivalent steps for other graphing/plotting notations as well. The name after ``` indicates which notation/tool is to be used. Lamarkdown currently supports: graphviz-circo , graphviz-dot , graphviz-fdp , graphviz-neato , graphviz-osage , graphviz-patchwork , graphviz-sfdp and graphviz-twopi (all from Graphviz of course); plantuml ; matplotlib ; and r-plot (R-based graphics). You will need to manually install these tools yourself (whichever one(s) you intend to use). Note: Lamarkdown also supports embedding LaTeX code , but this does not require fence notation.","title":"m.plots()"},{"location":"modules/teaching/","text":"m.teaching() TODO","title":"m.teaching"},{"location":"modules/teaching/#mteaching","text":"TODO","title":"m.teaching()"}]}